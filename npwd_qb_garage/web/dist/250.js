"use strict";(self.webpackChunkgarage=self.webpackChunkgarage||[]).push([[250],{6689:(e,t,n)=>{n.d(t,{Z:()=>o});var r=n(5949),a=n(5893);const o=(0,r.Z)([(0,a.jsx)("circle",{cx:"15",cy:"13",r:"1"},"0"),(0,a.jsx)("circle",{cx:"9",cy:"13",r:"1"},"1"),(0,a.jsx)("path",{d:"m8.33 7.5-.66 2h8.66l-.66-2z"},"2"),(0,a.jsx)("path",{d:"M20 2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-1 15.69c0 .45-.35.81-.78.81h-.44c-.44 0-.78-.36-.78-.81V16.5H7v1.19c0 .45-.35.81-.78.81h-.44c-.43 0-.78-.36-.78-.81v-6.5c.82-2.47 1.34-4.03 1.56-4.69.05-.16.12-.29.19-.4.02-.02.03-.04.05-.06.38-.53.92-.54.92-.54h8.56s.54.01.92.53c.02.03.03.05.05.07.07.11.14.24.19.4.22.66.74 2.23 1.56 4.69v6.5z"},"3")],"Garage")},4121:(e,t,n)=>{n.d(t,{x:()=>l});var r=n(2950),a=n.n(r),o=n(6689),l=function(){return a().createElement(o.Z,{fontSize:"large"})}},9250:(e,t,n)=>{n.r(t),n.d(t,{externalAppConfig:()=>l,default:()=>c});var r=n(4023),a=n(4121),o=n(4274),l=function(){return{id:"garage",nameLocale:"Garage",color:"#fff",backgroundColor:"#795548",path:"/garage",icon:a.x,app:r.Z,theme:o.rS}};const c=l},4023:(e,t,n)=>{n.d(t,{Z:()=>v});var r,a,o=n(2950),l=n.n(o),c=n(5475),i=n(6235),s=n(3839),u=n.n(s),d=n(8440),m=n(4810),p=n(5974),f=n(6867),Z=n(2658),x=n(4669),h=n(4958),g=n(7405),E=function(){return E=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},E.apply(this,arguments)},b=u().div(w||(r=["\n  flex: 1;\n  padding: 1.5rem;\n  display: flex;\n  box-sizing: border-box;\n  flex-direction: column;\n  overflow: auto;\n  max-height: 100%;\n  background-color: #fafafa;\n  ","\n"],a=["\n  flex: 1;\n  padding: 1.5rem;\n  display: flex;\n  box-sizing: border-box;\n  flex-direction: column;\n  overflow: auto;\n  max-height: 100%;\n  background-color: #fafafa;\n  ","\n"],Object.defineProperty?Object.defineProperty(r,"raw",{value:a}):r.raw=a,w=r),(function(e){return e.isDarkMode&&"\n    background-color: #212121;\n  "})),y=function(e){var t=(0,i.useHistory)(),n=(0,o.useState)([]),r=n[0],a=n[1],c=(0,o.useState)(null),s=c[0],u=c[1],E="dark"===e.theme.palette.mode;return(0,o.useEffect)((function(){(0,g.Z)("npwd:qb-garage:getVehicles").then((function(e){a(e.data)}))}),[]),(0,o.useEffect)((function(){if(r){var e=null==r?void 0:r.reduce((function(e,t){return e[t.type]||(e[t.type]=[]),e[t.type].push(t),e}),{});u(e)}}),[r]),l().createElement(m.Z,{injectFirst:!0},l().createElement(p.Z,{theme:e.theme},l().createElement(b,{isDarkMode:E},l().createElement(d.h,null,l().createElement(f.Z,{color:"primary",onClick:function(){return t.goBack()}},l().createElement(x.Z,null)),l().createElement(Z.Z,{fontSize:24,color:"primary",fontWeight:"bold"},"Garage")),s&&l().createElement(h.Y,{isDarkMode:E,vehicles:s}))))};const v=function(e){return l().createElement(c.NuiProvider,null,l().createElement(y,E({},e)))};var w},4274:(e,t,n)=>{n.d(t,{rS:()=>c});var r=n(3486),a=n(6115),o=r.Z[500],l=a.Z.white,c={palette:{primary:{main:o,dark:r.Z[700],light:r.Z[300],contrastText:l},secondary:{main:"#d32f2f",light:"#eb4242",dark:"#941212",contrastText:l},success:{main:"#2196f3",contrastText:l}}}},9589:(e,t,n)=>{n.d(t,{Z:()=>g});var r=n(2950),a=n.n(r),o=n(2440),l=n(799),c=n(700),i=n(4755),s=n(8584),u=n(2658),d=n(1508),m=n(6914),p=n(4637),f=n(9308),Z=n(2753),x=n(6024),h=n(7405);const g=function(e){var t=e.veh;return a().createElement(a().Fragment,null,a().createElement(o.Z,{sx:{width:"70%"}},a().createElement(l.ZP,{disablePadding:!0,sx:{borderBottom:"1px solid white",mb:"8px"}},a().createElement(c.Z,{sx:{ml:"5px",mr:"20px",minWidth:"25px"}},a().createElement(i.Z,{title:"Location"},a().createElement(f.Z,null))),a().createElement(s.Z,{primary:t.garageLabel})),a().createElement(l.ZP,{disablePadding:!0,sx:{borderBottom:"1px solid white",mb:"8px"}},a().createElement(c.Z,{sx:{ml:"5px",mr:"20px",minWidth:"25px"}},a().createElement(i.Z,{title:"Engine"},a().createElement(x.Z,null))),a().createElement(s.Z,{primary:a().createElement(u.Z,null,Math.ceil(t.engine/10),"%")})),a().createElement(l.ZP,{disablePadding:!0,sx:{borderBottom:"1px solid white",mb:"8px"}},a().createElement(c.Z,{sx:{ml:"5px",mr:"20px",minWidth:"25px"}},a().createElement(i.Z,{title:"Fuel"},a().createElement(Z.Z,null))),a().createElement(s.Z,{primary:a().createElement(u.Z,null,Math.ceil(t.fuel),"%")})),a().createElement(l.ZP,{disablePadding:!0,sx:{borderBottom:"1px solid white",mb:"8px"}},a().createElement(c.Z,{sx:{ml:"5px",mr:"20px",minWidth:"25px"}},a().createElement(i.Z,{title:"Body"},a().createElement(p.Z,null))),a().createElement(s.Z,{primary:a().createElement(u.Z,null,Math.ceil(t.body/10),"%")}))),a().createElement(d.Z,{sx:{display:"flex"}},a().createElement(m.Z,{color:"primary",variant:"contained",onClick:function(){return e=t.plate,n=t.state,r=t.garage,void(0,h.Z)("npwd:qb-garage:requestWaypoint",{plate:e,state:n,garage:r});var e,n,r}},"Track"),a().createElement(m.Z,{color:"secondary",variant:"contained",onClick:function(){return e=t.plate,void(0,h.Z)("npwd:qb-garage:reportStolen",{plate:e});var e}},"Report Stolen")))}},4958:(e,t,n)=>{n.d(t,{Y:()=>k});var r=n(1508),a=n(2440),o=n(8277),l=n(2981),c=n(799),i=n(7903),s=n(7425),u=n(6447),d=n(2658),m=n(5092),p=n(5137),f=n(3486),Z=n(265),x=n(7036),h=n(2950),g=n.n(h),E=n(6559),b=n(9521),y=n(4637),v=n(327),w=n(9589),k=function(e){var t=e.vehicles,n=(e.isDarkMode,(0,h.useState)("car")),k=n[0],S=n[1],z={car:{icon:g().createElement(y.Z,{sx:{fontSize:35}}),status:{out:p.Z[500],garaged:f.Z[500],impounded:Z.Z[500],seized:Z.Z[500],unknown:x.Z[500]}},aircraft:{icon:g().createElement(E.Z,{sx:{fontSize:35}}),status:{out:p.Z[500],garaged:f.Z[500],impounded:Z.Z[500],seized:Z.Z[500],unknown:x.Z[500]}},boat:{icon:g().createElement(v.Z,{sx:{fontSize:35}}),status:{out:p.Z[500],garaged:f.Z[500],impounded:Z.Z[500],seized:Z.Z[500],unknown:x.Z[500]}},bike:{icon:g().createElement(b.Z,{sx:{fontSize:35}}),status:{out:p.Z[500],garaged:f.Z[500],impounded:Z.Z[500],seized:Z.Z[500],unknown:x.Z[500]}}};return g().createElement(r.Z,null,Object.keys(t).map((function(e){return g().createElement(a.Z,{subheader:g().createElement(o.Z,{sx:{cursor:"pointer",position:"static"},onClick:function(){S(e)}},e.toUpperCase())},g().createElement(l.Z,{in:k===e},t[e].map((function(e){return g().createElement(c.ZP,null,g().createElement(i.Z,{sx:{width:"100%",borderBottom:"4px solid",borderBottomColor:z[e.type].status[e.state]}},g().createElement(s.Z,null,g().createElement(r.Z,{sx:{display:"flex",justifyContent:"space-between",width:"100%",alignItems:"center"}},g().createElement(r.Z,{sx:{display:"flex",gap:3,alignItems:"center"}},z[e.type].icon,g().createElement(u.Z,{spacing:1},g().createElement(d.Z,{sx:{fontSize:15}},e.brand+" "+e.vehicle),g().createElement(d.Z,{sx:{fontSize:15}},e.plate))),g().createElement(d.Z,{sx:{fontSize:14}},e.state.toUpperCase()))),g().createElement(m.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"}},g().createElement(w.Z,{veh:e}))))}))))})))}},8440:(e,t,n)=>{n.d(t,{h:()=>a});var r=n(3839),a=n.n(r)()("div")({width:"100%",justifyContent:"flex-start",display:"flex",alignItems:"center",gap:20,marginBottom:20})},7405:(e,t,n)=>{n.d(t,{Z:()=>a});var r=n(5181);const a=function(e,t,n){return a=this,o=void 0,c=function(){var a;return function(e,t){var n,r,a,o,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return l.label++,{value:o[1],done:!1};case 5:l.label++,r=o[1],o=[0];continue;case 7:o=l.ops.pop(),l.trys.pop();continue;default:if(!((a=(a=l.trys).length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){l=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){l.label=o[1];break}if(6===o[0]&&l.label<a[1]){l.label=a[1],a=o;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(o);break}a[2]&&l.ops.pop(),l.trys.pop();continue}o=t.call(e,l)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}}(this,(function(o){switch(o.label){case 0:return a={method:"post",headers:{"Content-Type":"application/json; charset=UTF-8"},body:JSON.stringify(t)},(0,r.Id)()&&n?[2,n]:[4,fetch("https://".concat("npwd_qb_garage","/").concat(e),a)];case 1:return[4,o.sent().json()];case 2:return[2,o.sent()]}}))},new((l=void 0)||(l=Promise))((function(e,t){function n(e){try{i(c.next(e))}catch(e){t(e)}}function r(e){try{i(c.throw(e))}catch(e){t(e)}}function i(t){var a;t.done?e(t.value):(a=t.value,a instanceof l?a:new l((function(e){e(a)}))).then(n,r)}i((c=c.apply(a,o||[])).next())}));var a,o,l,c}},5181:(e,t,n)=>{n.d(t,{Id:()=>r});var r=function(){return!1}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QixFQUFVVSxLQUFLekcsSUFBVyxNQUFPa0gsR0FBS2EsRUFBT2IsSUFDcEYsU0FBU2UsRUFBU2pJLEdBQVMsSUFBTW1ILEVBQUtwQixFQUFpQixNQUFFL0YsSUFBVyxNQUFPa0gsR0FBS2EsRUFBT2IsSUFDdkYsU0FBU0MsRUFBS2UsR0FKbEIsSUFBZWxJLEVBSWFrSSxFQUFPbEIsS0FBT2MsRUFBUUksRUFBT2xJLFFBSjFDQSxFQUl5RGtJLEVBQU9sSSxNQUpoREEsYUFBaUI0SCxFQUFJNUgsRUFBUSxJQUFJNEgsR0FBRSxTQUFVRSxHQUFXQSxFQUFROUgsT0FJVGdCLEtBQUtnSCxFQUFXQyxHQUNsR2QsR0FBTXBCLEVBQVlBLEVBQVVwRyxNQUFNa0csRUFBU0MsR0FBYyxLQUFLVyxXQU4xQixJQUFVWixFQUFTQyxFQUFZOEIsRUFBRzdCLEksaUNDQXZFLElBQUlvQyxFQUFlLFdBQ3RCLE9BQU8iLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9nYXJhZ2UvLi9ub2RlX21vZHVsZXMvQG11aS9pY29ucy1tYXRlcmlhbC9lc20vR2FyYWdlLmpzIiwid2VicGFjazovL2dhcmFnZS8uL2ljb24udHN4Iiwid2VicGFjazovL2dhcmFnZS8uL25wd2QuY29uZmlnLnRzIiwid2VicGFjazovL2dhcmFnZS8uL3NyYy9BcHAudHN4Iiwid2VicGFjazovL2dhcmFnZS8uL3NyYy9hcHAudGhlbWUudHMiLCJ3ZWJwYWNrOi8vZ2FyYWdlLy4vc3JjL2NvbXBvbmVudHMvVmVoaWNsZURldGFpbHMudHN4Iiwid2VicGFjazovL2dhcmFnZS8uL3NyYy9jb21wb25lbnRzL1ZlaGljbGVMaXN0LnRzeCIsIndlYnBhY2s6Ly9nYXJhZ2UvLi9zcmMvc3R5bGVzL2hlYWRlci5zdHlsZXMudHMiLCJ3ZWJwYWNrOi8vZ2FyYWdlLy4vc3JjL3V0aWxzL2ZldGNoTnVpLnRzIiwid2VicGFjazovL2dhcmFnZS8uL3NyYy91dGlscy9taXNjLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBjcmVhdGVTdmdJY29uIGZyb20gJy4vdXRpbHMvY3JlYXRlU3ZnSWNvbic7XG5pbXBvcnQgeyBqc3ggYXMgX2pzeCB9IGZyb20gXCJyZWFjdC9qc3gtcnVudGltZVwiO1xuZXhwb3J0IGRlZmF1bHQgY3JlYXRlU3ZnSWNvbihbLyojX19QVVJFX18qL19qc3goXCJjaXJjbGVcIiwge1xuICBjeDogXCIxNVwiLFxuICBjeTogXCIxM1wiLFxuICByOiBcIjFcIlxufSwgXCIwXCIpLCAvKiNfX1BVUkVfXyovX2pzeChcImNpcmNsZVwiLCB7XG4gIGN4OiBcIjlcIixcbiAgY3k6IFwiMTNcIixcbiAgcjogXCIxXCJcbn0sIFwiMVwiKSwgLyojX19QVVJFX18qL19qc3goXCJwYXRoXCIsIHtcbiAgZDogXCJtOC4zMyA3LjUtLjY2IDJoOC42NmwtLjY2LTJ6XCJcbn0sIFwiMlwiKSwgLyojX19QVVJFX18qL19qc3goXCJwYXRoXCIsIHtcbiAgZDogXCJNMjAgMkg0Yy0xLjEgMC0yIC45LTIgMnYxNmMwIDEuMS45IDIgMiAyaDE2YzEuMSAwIDItLjkgMi0yVjRjMC0xLjEtLjktMi0yLTJ6bS0xIDE1LjY5YzAgLjQ1LS4zNS44MS0uNzguODFoLS40NGMtLjQ0IDAtLjc4LS4zNi0uNzgtLjgxVjE2LjVIN3YxLjE5YzAgLjQ1LS4zNS44MS0uNzguODFoLS40NGMtLjQzIDAtLjc4LS4zNi0uNzgtLjgxdi02LjVjLjgyLTIuNDcgMS4zNC00LjAzIDEuNTYtNC42OS4wNS0uMTYuMTItLjI5LjE5LS40LjAyLS4wMi4wMy0uMDQuMDUtLjA2LjM4LS41My45Mi0uNTQuOTItLjU0aDguNTZzLjU0LjAxLjkyLjUzYy4wMi4wMy4wMy4wNS4wNS4wNy4wNy4xMS4xNC4yNC4xOS40LjIyLjY2Ljc0IDIuMjMgMS41NiA0LjY5djYuNXpcIlxufSwgXCIzXCIpXSwgJ0dhcmFnZScpOyIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IEdhcmFnZSB9IGZyb20gJ0BtdWkvaWNvbnMtbWF0ZXJpYWwnO1xyXG5leHBvcnQgdmFyIEdhcmFnZUljb24gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChHYXJhZ2UsIHsgZm9udFNpemU6IFwibGFyZ2VcIiB9KTtcclxufTtcclxuZXhwb3J0IHZhciBOb3RpZmljYXRpb25JY29uID0gZnVuY3Rpb24gKCkge1xyXG4gICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoR2FyYWdlLCB7IGZvbnRTaXplOiBcImxhcmdlXCIgfSk7XHJcbn07XHJcbiIsImltcG9ydCBBcHAgZnJvbSAnLi9zcmMvQXBwJztcclxuaW1wb3J0IHsgR2FyYWdlSWNvbiB9IGZyb20gJy4vaWNvbic7XHJcbmltcG9ydCB7IHRoZW1lIH0gZnJvbSAnLi9zcmMvYXBwLnRoZW1lJztcclxuZXhwb3J0IHZhciBleHRlcm5hbEFwcENvbmZpZyA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICh7XHJcbiAgICBpZDogJ2dhcmFnZScsXHJcbiAgICBuYW1lTG9jYWxlOiAnR2FyYWdlJyxcclxuICAgIGNvbG9yOiAnI2ZmZicsXHJcbiAgICBiYWNrZ3JvdW5kQ29sb3I6ICcjNzk1NTQ4JyxcclxuICAgIHBhdGg6ICcvZ2FyYWdlJyxcclxuICAgIGljb246IEdhcmFnZUljb24sXHJcbiAgICBhcHA6IEFwcCxcclxuICAgIHRoZW1lOiB0aGVtZSxcclxufSk7IH07XHJcbmV4cG9ydCBkZWZhdWx0IGV4dGVybmFsQXBwQ29uZmlnO1xyXG4iLCJ2YXIgX19tYWtlVGVtcGxhdGVPYmplY3QgPSAodGhpcyAmJiB0aGlzLl9fbWFrZVRlbXBsYXRlT2JqZWN0KSB8fCBmdW5jdGlvbiAoY29va2VkLCByYXcpIHtcclxuICAgIGlmIChPYmplY3QuZGVmaW5lUHJvcGVydHkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KGNvb2tlZCwgXCJyYXdcIiwgeyB2YWx1ZTogcmF3IH0pOyB9IGVsc2UgeyBjb29rZWQucmF3ID0gcmF3OyB9XHJcbiAgICByZXR1cm4gY29va2VkO1xyXG59O1xyXG52YXIgX19hc3NpZ24gPSAodGhpcyAmJiB0aGlzLl9fYXNzaWduKSB8fCBmdW5jdGlvbiAoKSB7XHJcbiAgICBfX2Fzc2lnbiA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24odCkge1xyXG4gICAgICAgIGZvciAodmFyIHMsIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xyXG4gICAgICAgICAgICBzID0gYXJndW1lbnRzW2ldO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkpXHJcbiAgICAgICAgICAgICAgICB0W3BdID0gc1twXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHQ7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIF9fYXNzaWduLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcbn07XHJcbmltcG9ydCBSZWFjdCwgeyB1c2VFZmZlY3QsIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBOdWlQcm92aWRlciB9IGZyb20gJ3JlYWN0LWZpdmVtLWhvb2tzJztcclxuaW1wb3J0IHsgdXNlSGlzdG9yeSB9IGZyb20gJ3JlYWN0LXJvdXRlci1kb20nO1xyXG5pbXBvcnQgc3R5bGVkIGZyb20gJ3N0eWxlZC1jb21wb25lbnRzJztcclxuaW1wb3J0IHsgSGVhZGVyIH0gZnJvbSAnLi9zdHlsZXMvaGVhZGVyLnN0eWxlcyc7XHJcbmltcG9ydCB7IEljb25CdXR0b24sIFN0eWxlZEVuZ2luZVByb3ZpZGVyLCBUaGVtZVByb3ZpZGVyLCBUeXBvZ3JhcGh5IH0gZnJvbSAnQG11aS9tYXRlcmlhbCc7XHJcbmltcG9ydCB7IEFycm93QmFjayB9IGZyb20gJ0BtdWkvaWNvbnMtbWF0ZXJpYWwnO1xyXG5pbXBvcnQgeyBWZWhpY2xlTGlzdCB9IGZyb20gJy4vY29tcG9uZW50cy9WZWhpY2xlTGlzdCc7XHJcbmltcG9ydCBmZXRjaE51aSBmcm9tICcuL3V0aWxzL2ZldGNoTnVpJztcclxudmFyIENvbnRhaW5lciA9IHN0eWxlZC5kaXYodGVtcGxhdGVPYmplY3RfMSB8fCAodGVtcGxhdGVPYmplY3RfMSA9IF9fbWFrZVRlbXBsYXRlT2JqZWN0KFtcIlxcbiAgZmxleDogMTtcXG4gIHBhZGRpbmc6IDEuNXJlbTtcXG4gIGRpc3BsYXk6IGZsZXg7XFxuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcXG4gIG92ZXJmbG93OiBhdXRvO1xcbiAgbWF4LWhlaWdodDogMTAwJTtcXG4gIGJhY2tncm91bmQtY29sb3I6ICNmYWZhZmE7XFxuICBcIiwgXCJcXG5cIl0sIFtcIlxcbiAgZmxleDogMTtcXG4gIHBhZGRpbmc6IDEuNXJlbTtcXG4gIGRpc3BsYXk6IGZsZXg7XFxuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcXG4gIG92ZXJmbG93OiBhdXRvO1xcbiAgbWF4LWhlaWdodDogMTAwJTtcXG4gIGJhY2tncm91bmQtY29sb3I6ICNmYWZhZmE7XFxuICBcIiwgXCJcXG5cIl0pKSwgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICB2YXIgaXNEYXJrTW9kZSA9IF9hLmlzRGFya01vZGU7XHJcbiAgICByZXR1cm4gaXNEYXJrTW9kZSAmJlxyXG4gICAgICAgIFwiXFxuICAgIGJhY2tncm91bmQtY29sb3I6ICMyMTIxMjE7XFxuICBcIjtcclxufSk7XHJcbnZhciBBcHAgPSBmdW5jdGlvbiAocHJvcHMpIHtcclxuICAgIHZhciBoaXN0b3J5ID0gdXNlSGlzdG9yeSgpO1xyXG4gICAgdmFyIF9hID0gdXNlU3RhdGUoW10pLCB2ZWhpY2xlcyA9IF9hWzBdLCBzZXRWZWhpY2xlcyA9IF9hWzFdO1xyXG4gICAgdmFyIF9iID0gdXNlU3RhdGUobnVsbCksIG1hcHBlZFZlaCA9IF9iWzBdLCBzZXRNYXBwZWRWZWggPSBfYlsxXTtcclxuICAgIHZhciBpc0RhcmtNb2RlID0gcHJvcHMudGhlbWUucGFsZXR0ZS5tb2RlID09PSAnZGFyayc7XHJcbiAgICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGZldGNoTnVpKCducHdkOnFiLWdhcmFnZTpnZXRWZWhpY2xlcycpLnRoZW4oZnVuY3Rpb24gKHJlc3ApIHtcclxuICAgICAgICAgICAgc2V0VmVoaWNsZXMocmVzcC5kYXRhKTtcclxuICAgICAgICB9KTtcclxuICAgIH0sIFtdKTtcclxuICAgIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHZlaGljbGVzKSB7XHJcbiAgICAgICAgICAgIHZhciBtYXBwZWRWZWhpY2xlcyA9IHZlaGljbGVzID09PSBudWxsIHx8IHZlaGljbGVzID09PSB2b2lkIDAgPyB2b2lkIDAgOiB2ZWhpY2xlcy5yZWR1Y2UoZnVuY3Rpb24gKHZlaHMsIHZlaGljbGUpIHtcclxuICAgICAgICAgICAgICAgIGlmICghdmVoc1t2ZWhpY2xlLnR5cGVdKVxyXG4gICAgICAgICAgICAgICAgICAgIHZlaHNbdmVoaWNsZS50eXBlXSA9IFtdO1xyXG4gICAgICAgICAgICAgICAgdmVoc1t2ZWhpY2xlLnR5cGVdLnB1c2godmVoaWNsZSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdmVocztcclxuICAgICAgICAgICAgfSwge30pO1xyXG4gICAgICAgICAgICBzZXRNYXBwZWRWZWgobWFwcGVkVmVoaWNsZXMpO1xyXG4gICAgICAgIH1cclxuICAgIH0sIFt2ZWhpY2xlc10pO1xyXG4gICAgcmV0dXJuIChSZWFjdC5jcmVhdGVFbGVtZW50KFN0eWxlZEVuZ2luZVByb3ZpZGVyLCB7IGluamVjdEZpcnN0OiB0cnVlIH0sXHJcbiAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChUaGVtZVByb3ZpZGVyLCB7IHRoZW1lOiBwcm9wcy50aGVtZSB9LFxyXG4gICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KENvbnRhaW5lciwgeyBpc0RhcmtNb2RlOiBpc0RhcmtNb2RlIH0sXHJcbiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KEhlYWRlciwgbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KEljb25CdXR0b24sIHsgY29sb3I6IFwicHJpbWFyeVwiLCBvbkNsaWNrOiBmdW5jdGlvbiAoKSB7IHJldHVybiBoaXN0b3J5LmdvQmFjaygpOyB9IH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoQXJyb3dCYWNrLCBudWxsKSksXHJcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChUeXBvZ3JhcGh5LCB7IGZvbnRTaXplOiAyNCwgY29sb3I6IFwicHJpbWFyeVwiLCBmb250V2VpZ2h0OiBcImJvbGRcIiB9LCBcIkdhcmFnZVwiKSksXHJcbiAgICAgICAgICAgICAgICBtYXBwZWRWZWggJiYgUmVhY3QuY3JlYXRlRWxlbWVudChWZWhpY2xlTGlzdCwgeyBpc0RhcmtNb2RlOiBpc0RhcmtNb2RlLCB2ZWhpY2xlczogbWFwcGVkVmVoIH0pKSkpKTtcclxufTtcclxudmFyIFdpdGhQcm92aWRlcnMgPSBmdW5jdGlvbiAocHJvcHMpIHsgcmV0dXJuIChSZWFjdC5jcmVhdGVFbGVtZW50KE51aVByb3ZpZGVyLCBudWxsLFxyXG4gICAgUmVhY3QuY3JlYXRlRWxlbWVudChBcHAsIF9fYXNzaWduKHt9LCBwcm9wcykpKSk7IH07XHJcbmV4cG9ydCBkZWZhdWx0IFdpdGhQcm92aWRlcnM7XHJcbnZhciB0ZW1wbGF0ZU9iamVjdF8xO1xyXG4iLCJpbXBvcnQgeyBjb21tb24sIGdyZWVuIH0gZnJvbSAnQG11aS9tYXRlcmlhbC9jb2xvcnMnO1xyXG5leHBvcnQgdmFyIEFQUF9QUklNQVJZX0NPTE9SID0gZ3JlZW5bNTAwXTtcclxuZXhwb3J0IHZhciBBUFBfVEVYVF9DT0xPUiA9IGNvbW1vbi53aGl0ZTtcclxuZXhwb3J0IHZhciB0aGVtZSA9IHtcclxuICAgIHBhbGV0dGU6IHtcclxuICAgICAgICBwcmltYXJ5OiB7XHJcbiAgICAgICAgICAgIG1haW46IEFQUF9QUklNQVJZX0NPTE9SLFxyXG4gICAgICAgICAgICBkYXJrOiBncmVlbls3MDBdLFxyXG4gICAgICAgICAgICBsaWdodDogZ3JlZW5bMzAwXSxcclxuICAgICAgICAgICAgY29udHJhc3RUZXh0OiBBUFBfVEVYVF9DT0xPUixcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNlY29uZGFyeToge1xyXG4gICAgICAgICAgICBtYWluOiAnI2QzMmYyZicsXHJcbiAgICAgICAgICAgIGxpZ2h0OiAnI2ViNDI0MicsXHJcbiAgICAgICAgICAgIGRhcms6ICcjOTQxMjEyJyxcclxuICAgICAgICAgICAgY29udHJhc3RUZXh0OiBBUFBfVEVYVF9DT0xPUixcclxuICAgICAgICB9LFxyXG4gICAgICAgIHN1Y2Nlc3M6IHtcclxuICAgICAgICAgICAgbWFpbjogJyMyMTk2ZjMnLFxyXG4gICAgICAgICAgICBjb250cmFzdFRleHQ6IEFQUF9URVhUX0NPTE9SLFxyXG4gICAgICAgIH0sXHJcbiAgICB9LFxyXG59O1xyXG4iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBCb3gsIEJ1dHRvbiwgTGlzdCwgTGlzdEl0ZW0sIExpc3RJdGVtSWNvbiwgTGlzdEl0ZW1UZXh0LCBUb29sdGlwLCBUeXBvZ3JhcGh5LCB9IGZyb20gJ0BtdWkvbWF0ZXJpYWwnO1xyXG5pbXBvcnQgRGlyZWN0aW9uc0Nhckljb24gZnJvbSAnQG11aS9pY29ucy1tYXRlcmlhbC9EaXJlY3Rpb25zQ2FyJztcclxuaW1wb3J0IExvY2F0aW9uT25JY29uIGZyb20gJ0BtdWkvaWNvbnMtbWF0ZXJpYWwvTG9jYXRpb25Pbic7XHJcbmltcG9ydCBMb2NhbEdhc1N0YXRpb25JY29uIGZyb20gJ0BtdWkvaWNvbnMtbWF0ZXJpYWwvTG9jYWxHYXNTdGF0aW9uJztcclxuaW1wb3J0IEJ1aWxkSWNvbiBmcm9tICdAbXVpL2ljb25zLW1hdGVyaWFsL0J1aWxkJztcclxuaW1wb3J0IGZldGNoTnVpIGZyb20gJy4uL3V0aWxzL2ZldGNoTnVpJztcclxudmFyIFZlaGljbGVEZXRhaWxzID0gZnVuY3Rpb24gKF9hKSB7XHJcbiAgICB2YXIgdmVoID0gX2EudmVoO1xyXG4gICAgdmFyIGhhbmRsZVRyYWNrVmVoaWNsZSA9IGZ1bmN0aW9uIChwbGF0ZSwgc3RhdGUsIGdhcmFnZSkge1xyXG4gICAgICAgIGZldGNoTnVpKCducHdkOnFiLWdhcmFnZTpyZXF1ZXN0V2F5cG9pbnQnLCB7IHBsYXRlOiBwbGF0ZSwgc3RhdGU6IHN0YXRlLCBnYXJhZ2U6IGdhcmFnZSB9KTtcclxuICAgIH07XHJcbiAgICB2YXIgaGFuZGxlUmVwb3J0VmVoaWNsZSA9IGZ1bmN0aW9uIChwbGF0ZSkge1xyXG4gICAgICAgIGZldGNoTnVpKCducHdkOnFiLWdhcmFnZTpyZXBvcnRTdG9sZW4nLCB7IHBsYXRlOiBwbGF0ZSB9KTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gKFJlYWN0LmNyZWF0ZUVsZW1lbnQoUmVhY3QuRnJhZ21lbnQsIG51bGwsXHJcbiAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChMaXN0LCB7IHN4OiB7IHdpZHRoOiAnNzAlJyB9IH0sXHJcbiAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoTGlzdEl0ZW0sIHsgZGlzYWJsZVBhZGRpbmc6IHRydWUsIHN4OiB7IGJvcmRlckJvdHRvbTogJzFweCBzb2xpZCB3aGl0ZScsIG1iOiAnOHB4JyB9IH0sXHJcbiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KExpc3RJdGVtSWNvbiwgeyBzeDogeyBtbDogJzVweCcsIG1yOiAnMjBweCcsIG1pbldpZHRoOiAnMjVweCcgfSB9LFxyXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoVG9vbHRpcCwgeyB0aXRsZTogXCJMb2NhdGlvblwiIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoTG9jYXRpb25Pbkljb24sIG51bGwpKSksXHJcbiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KExpc3RJdGVtVGV4dCwgeyBwcmltYXJ5OiB2ZWguZ2FyYWdlTGFiZWwgfSkpLFxyXG4gICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KExpc3RJdGVtLCB7IGRpc2FibGVQYWRkaW5nOiB0cnVlLCBzeDogeyBib3JkZXJCb3R0b206ICcxcHggc29saWQgd2hpdGUnLCBtYjogJzhweCcgfSB9LFxyXG4gICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChMaXN0SXRlbUljb24sIHsgc3g6IHsgbWw6ICc1cHgnLCBtcjogJzIwcHgnLCBtaW5XaWR0aDogJzI1cHgnIH0gfSxcclxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFRvb2x0aXAsIHsgdGl0bGU6IFwiRW5naW5lXCIgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChCdWlsZEljb24sIG51bGwpKSksXHJcbiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KExpc3RJdGVtVGV4dCwgeyBwcmltYXJ5OiBSZWFjdC5jcmVhdGVFbGVtZW50KFR5cG9ncmFwaHksIG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE1hdGguY2VpbCh2ZWguZW5naW5lIC8gMTApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcIiVcIikgfSkpLFxyXG4gICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KExpc3RJdGVtLCB7IGRpc2FibGVQYWRkaW5nOiB0cnVlLCBzeDogeyBib3JkZXJCb3R0b206ICcxcHggc29saWQgd2hpdGUnLCBtYjogJzhweCcgfSB9LFxyXG4gICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChMaXN0SXRlbUljb24sIHsgc3g6IHsgbWw6ICc1cHgnLCBtcjogJzIwcHgnLCBtaW5XaWR0aDogJzI1cHgnIH0gfSxcclxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFRvb2x0aXAsIHsgdGl0bGU6IFwiRnVlbFwiIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoTG9jYWxHYXNTdGF0aW9uSWNvbiwgbnVsbCkpKSxcclxuICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoTGlzdEl0ZW1UZXh0LCB7IHByaW1hcnk6IFJlYWN0LmNyZWF0ZUVsZW1lbnQoVHlwb2dyYXBoeSwgbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5jZWlsKHZlaC5mdWVsKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCIlXCIpIH0pKSxcclxuICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChMaXN0SXRlbSwgeyBkaXNhYmxlUGFkZGluZzogdHJ1ZSwgc3g6IHsgYm9yZGVyQm90dG9tOiAnMXB4IHNvbGlkIHdoaXRlJywgbWI6ICc4cHgnIH0gfSxcclxuICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoTGlzdEl0ZW1JY29uLCB7IHN4OiB7IG1sOiAnNXB4JywgbXI6ICcyMHB4JywgbWluV2lkdGg6ICcyNXB4JyB9IH0sXHJcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChUb29sdGlwLCB7IHRpdGxlOiBcIkJvZHlcIiB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KERpcmVjdGlvbnNDYXJJY29uLCBudWxsKSkpLFxyXG4gICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChMaXN0SXRlbVRleHQsIHsgcHJpbWFyeTogUmVhY3QuY3JlYXRlRWxlbWVudChUeXBvZ3JhcGh5LCBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBNYXRoLmNlaWwodmVoLmJvZHkgLyAxMCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiJVwiKSB9KSkpLFxyXG4gICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoQm94LCB7IHN4OiB7IGRpc3BsYXk6ICdmbGV4JyB9IH0sXHJcbiAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoQnV0dG9uLCB7IGNvbG9yOiBcInByaW1hcnlcIiwgdmFyaWFudDogXCJjb250YWluZWRcIiwgb25DbGljazogZnVuY3Rpb24gKCkgeyByZXR1cm4gaGFuZGxlVHJhY2tWZWhpY2xlKHZlaC5wbGF0ZSwgdmVoLnN0YXRlLCB2ZWguZ2FyYWdlKTsgfSB9LCBcIlRyYWNrXCIpLFxyXG4gICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KEJ1dHRvbiwgeyBjb2xvcjogXCJzZWNvbmRhcnlcIiwgdmFyaWFudDogXCJjb250YWluZWRcIiwgb25DbGljazogZnVuY3Rpb24gKCkgeyByZXR1cm4gaGFuZGxlUmVwb3J0VmVoaWNsZSh2ZWgucGxhdGUpOyB9IH0sIFwiUmVwb3J0IFN0b2xlblwiKSkpKTtcclxufTtcclxuZXhwb3J0IGRlZmF1bHQgVmVoaWNsZURldGFpbHM7XHJcbiIsImltcG9ydCB7IEJveCwgTGlzdEl0ZW0sIExpc3QsIExpc3RTdWJoZWFkZXIsIENvbGxhcHNlLCBBY2NvcmRpb24sIEFjY29yZGlvblN1bW1hcnksIFR5cG9ncmFwaHksIEFjY29yZGlvbkRldGFpbHMsIFN0YWNrLCB9IGZyb20gJ0BtdWkvbWF0ZXJpYWwnO1xyXG5pbXBvcnQgeyBncmVlbiwgZ3JleSwgb3JhbmdlLCByZWQgfSBmcm9tICdAbXVpL21hdGVyaWFsL2NvbG9ycyc7XHJcbmltcG9ydCBSZWFjdCwgeyB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IEZsaWdodEljb24gZnJvbSAnQG11aS9pY29ucy1tYXRlcmlhbC9GbGlnaHQnO1xyXG5pbXBvcnQgUGVkYWxCaWtlSWNvbiBmcm9tICdAbXVpL2ljb25zLW1hdGVyaWFsL1BlZGFsQmlrZSc7XHJcbmltcG9ydCBEaXJlY3Rpb25zQ2FySWNvbiBmcm9tICdAbXVpL2ljb25zLW1hdGVyaWFsL0RpcmVjdGlvbnNDYXInO1xyXG5pbXBvcnQgRGlyZWN0aW9uc0JvYXRJY29uIGZyb20gJ0BtdWkvaWNvbnMtbWF0ZXJpYWwvRGlyZWN0aW9uc0JvYXQnO1xyXG5pbXBvcnQgVmVoaWNsZURldGFpbHMgZnJvbSAnLi9WZWhpY2xlRGV0YWlscyc7XHJcbmV4cG9ydCB2YXIgVmVoaWNsZUxpc3QgPSBmdW5jdGlvbiAoX2EpIHtcclxuICAgIHZhciB2ZWhpY2xlcyA9IF9hLnZlaGljbGVzLCBpc0RhcmtNb2RlID0gX2EuaXNEYXJrTW9kZTtcclxuICAgIHZhciBfYiA9IHVzZVN0YXRlKCdjYXInKSwgY29sbGFwc2VJZCA9IF9iWzBdLCBzZXRDb2xsYXBzZUlkID0gX2JbMV07XHJcbiAgICB2YXIgdHlwZUljb24gPSB7XHJcbiAgICAgICAgY2FyOiB7XHJcbiAgICAgICAgICAgIGljb246IFJlYWN0LmNyZWF0ZUVsZW1lbnQoRGlyZWN0aW9uc0Nhckljb24sIHsgc3g6IHsgZm9udFNpemU6IDM1IH0gfSksXHJcbiAgICAgICAgICAgIHN0YXR1czoge1xyXG4gICAgICAgICAgICAgICAgb3V0OiBvcmFuZ2VbNTAwXSxcclxuICAgICAgICAgICAgICAgIGdhcmFnZWQ6IGdyZWVuWzUwMF0sXHJcbiAgICAgICAgICAgICAgICBpbXBvdW5kZWQ6IHJlZFs1MDBdLFxyXG4gICAgICAgICAgICAgICAgc2VpemVkOiByZWRbNTAwXSxcclxuICAgICAgICAgICAgICAgIHVua25vd246IGdyZXlbNTAwXSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICB9LFxyXG4gICAgICAgIGFpcmNyYWZ0OiB7XHJcbiAgICAgICAgICAgIGljb246IFJlYWN0LmNyZWF0ZUVsZW1lbnQoRmxpZ2h0SWNvbiwgeyBzeDogeyBmb250U2l6ZTogMzUgfSB9KSxcclxuICAgICAgICAgICAgc3RhdHVzOiB7XHJcbiAgICAgICAgICAgICAgICBvdXQ6IG9yYW5nZVs1MDBdLFxyXG4gICAgICAgICAgICAgICAgZ2FyYWdlZDogZ3JlZW5bNTAwXSxcclxuICAgICAgICAgICAgICAgIGltcG91bmRlZDogcmVkWzUwMF0sXHJcbiAgICAgICAgICAgICAgICBzZWl6ZWQ6IHJlZFs1MDBdLFxyXG4gICAgICAgICAgICAgICAgdW5rbm93bjogZ3JleVs1MDBdLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgYm9hdDoge1xyXG4gICAgICAgICAgICBpY29uOiBSZWFjdC5jcmVhdGVFbGVtZW50KERpcmVjdGlvbnNCb2F0SWNvbiwgeyBzeDogeyBmb250U2l6ZTogMzUgfSB9KSxcclxuICAgICAgICAgICAgc3RhdHVzOiB7XHJcbiAgICAgICAgICAgICAgICBvdXQ6IG9yYW5nZVs1MDBdLFxyXG4gICAgICAgICAgICAgICAgZ2FyYWdlZDogZ3JlZW5bNTAwXSxcclxuICAgICAgICAgICAgICAgIGltcG91bmRlZDogcmVkWzUwMF0sXHJcbiAgICAgICAgICAgICAgICBzZWl6ZWQ6IHJlZFs1MDBdLFxyXG4gICAgICAgICAgICAgICAgdW5rbm93bjogZ3JleVs1MDBdLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgYmlrZToge1xyXG4gICAgICAgICAgICBpY29uOiBSZWFjdC5jcmVhdGVFbGVtZW50KFBlZGFsQmlrZUljb24sIHsgc3g6IHsgZm9udFNpemU6IDM1IH0gfSksXHJcbiAgICAgICAgICAgIHN0YXR1czoge1xyXG4gICAgICAgICAgICAgICAgb3V0OiBvcmFuZ2VbNTAwXSxcclxuICAgICAgICAgICAgICAgIGdhcmFnZWQ6IGdyZWVuWzUwMF0sXHJcbiAgICAgICAgICAgICAgICBpbXBvdW5kZWQ6IHJlZFs1MDBdLFxyXG4gICAgICAgICAgICAgICAgc2VpemVkOiByZWRbNTAwXSxcclxuICAgICAgICAgICAgICAgIHVua25vd246IGdyZXlbNTAwXSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICB9LFxyXG4gICAgfTtcclxuICAgIHZhciBleHBhbmRJdGVtID0gZnVuY3Rpb24gKGlkKSB7XHJcbiAgICAgICAgc2V0Q29sbGFwc2VJZChpZCk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIChSZWFjdC5jcmVhdGVFbGVtZW50KEJveCwgbnVsbCwgT2JqZWN0LmtleXModmVoaWNsZXMpLm1hcChmdW5jdGlvbiAoa2V5KSB7IHJldHVybiAoUmVhY3QuY3JlYXRlRWxlbWVudChMaXN0LCB7IHN1YmhlYWRlcjogUmVhY3QuY3JlYXRlRWxlbWVudChMaXN0U3ViaGVhZGVyLCB7IHN4OiB7IGN1cnNvcjogJ3BvaW50ZXInLCBwb3NpdGlvbjogXCJzdGF0aWNcIiB9LCBvbkNsaWNrOiBmdW5jdGlvbiAoKSB7IHJldHVybiBleHBhbmRJdGVtKGtleSk7IH0gfSwga2V5LnRvVXBwZXJDYXNlKCkpIH0sXHJcbiAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChDb2xsYXBzZSwgeyBpbjogY29sbGFwc2VJZCA9PT0ga2V5IH0sIHZlaGljbGVzW2tleV0ubWFwKGZ1bmN0aW9uICh2ZWgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIChSZWFjdC5jcmVhdGVFbGVtZW50KExpc3RJdGVtLCBudWxsLFxyXG4gICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChBY2NvcmRpb24sIHsgc3g6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6ICcxMDAlJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyQm90dG9tOiAnNHB4IHNvbGlkJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyQm90dG9tQ29sb3I6IHR5cGVJY29uW3ZlaC50eXBlXS5zdGF0dXNbdmVoLnN0YXRlXSxcclxuICAgICAgICAgICAgICAgICAgICB9IH0sXHJcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChBY2NvcmRpb25TdW1tYXJ5LCBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KEJveCwgeyBzeDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6ICdmbGV4JyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqdXN0aWZ5Q29udGVudDogJ3NwYWNlLWJldHdlZW4nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiAnMTAwJScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxpZ25JdGVtczogJ2NlbnRlcicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KEJveCwgeyBzeDogeyBkaXNwbGF5OiAnZmxleCcsIGdhcDogMywgYWxpZ25JdGVtczogJ2NlbnRlcicgfSB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGVJY29uW3ZlaC50eXBlXS5pY29uLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoU3RhY2ssIHsgc3BhY2luZzogMSB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFR5cG9ncmFwaHksIHsgc3g6IHsgZm9udFNpemU6IDE1IH0gfSwgdmVoLmJyYW5kICsgJyAnICsgdmVoLnZlaGljbGUpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFR5cG9ncmFwaHksIHsgc3g6IHsgZm9udFNpemU6IDE1IH0gfSwgdmVoLnBsYXRlKSkpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChUeXBvZ3JhcGh5LCB7IHN4OiB7IGZvbnRTaXplOiAxNCB9IH0sIHZlaC5zdGF0ZS50b1VwcGVyQ2FzZSgpKSkpLFxyXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoQWNjb3JkaW9uRGV0YWlscywgeyBzeDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogJ2ZsZXgnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAganVzdGlmeUNvbnRlbnQ6ICdjZW50ZXInLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxpZ25JdGVtczogJ2NlbnRlcicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmbGV4RGlyZWN0aW9uOiAnY29sdW1uJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFZlaGljbGVEZXRhaWxzLCB7IHZlaDogdmVoIH0pKSkpKTtcclxuICAgICAgICB9KSkpKTsgfSkpKTtcclxufTtcclxuIiwiaW1wb3J0IHN0eWxlZCBmcm9tIFwic3R5bGVkLWNvbXBvbmVudHNcIjtcclxuZXhwb3J0IHZhciBIZWFkZXIgPSBzdHlsZWQoJ2RpdicpKHtcclxuICAgIHdpZHRoOiAnMTAwJScsXHJcbiAgICBqdXN0aWZ5Q29udGVudDogJ2ZsZXgtc3RhcnQnLFxyXG4gICAgZGlzcGxheTogJ2ZsZXgnLFxyXG4gICAgYWxpZ25JdGVtczogJ2NlbnRlcicsXHJcbiAgICBnYXA6IDIwLFxyXG4gICAgbWFyZ2luQm90dG9tOiAyMCxcclxufSk7XHJcbiIsInZhciBfX2F3YWl0ZXIgPSAodGhpcyAmJiB0aGlzLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xyXG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XHJcbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cclxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XHJcbiAgICB9KTtcclxufTtcclxudmFyIF9fZ2VuZXJhdG9yID0gKHRoaXMgJiYgdGhpcy5fX2dlbmVyYXRvcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIGJvZHkpIHtcclxuICAgIHZhciBfID0geyBsYWJlbDogMCwgc2VudDogZnVuY3Rpb24oKSB7IGlmICh0WzBdICYgMSkgdGhyb3cgdFsxXTsgcmV0dXJuIHRbMV07IH0sIHRyeXM6IFtdLCBvcHM6IFtdIH0sIGYsIHksIHQsIGc7XHJcbiAgICByZXR1cm4gZyA9IHsgbmV4dDogdmVyYigwKSwgXCJ0aHJvd1wiOiB2ZXJiKDEpLCBcInJldHVyblwiOiB2ZXJiKDIpIH0sIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiAoZ1tTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KSwgZztcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyByZXR1cm4gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIHN0ZXAoW24sIHZdKTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gc3RlcChvcCkge1xyXG4gICAgICAgIGlmIChmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiR2VuZXJhdG9yIGlzIGFscmVhZHkgZXhlY3V0aW5nLlwiKTtcclxuICAgICAgICB3aGlsZSAoXykgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKGYgPSAxLCB5ICYmICh0ID0gb3BbMF0gJiAyID8geVtcInJldHVyblwiXSA6IG9wWzBdID8geVtcInRocm93XCJdIHx8ICgodCA9IHlbXCJyZXR1cm5cIl0pICYmIHQuY2FsbCh5KSwgMCkgOiB5Lm5leHQpICYmICEodCA9IHQuY2FsbCh5LCBvcFsxXSkpLmRvbmUpIHJldHVybiB0O1xyXG4gICAgICAgICAgICBpZiAoeSA9IDAsIHQpIG9wID0gW29wWzBdICYgMiwgdC52YWx1ZV07XHJcbiAgICAgICAgICAgIHN3aXRjaCAob3BbMF0pIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMDogY2FzZSAxOiB0ID0gb3A7IGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA0OiBfLmxhYmVsKys7IHJldHVybiB7IHZhbHVlOiBvcFsxXSwgZG9uZTogZmFsc2UgfTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNTogXy5sYWJlbCsrOyB5ID0gb3BbMV07IG9wID0gWzBdOyBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNzogb3AgPSBfLm9wcy5wb3AoKTsgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEodCA9IF8udHJ5cywgdCA9IHQubGVuZ3RoID4gMCAmJiB0W3QubGVuZ3RoIC0gMV0pICYmIChvcFswXSA9PT0gNiB8fCBvcFswXSA9PT0gMikpIHsgXyA9IDA7IGNvbnRpbnVlOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSAzICYmICghdCB8fCAob3BbMV0gPiB0WzBdICYmIG9wWzFdIDwgdFszXSkpKSB7IF8ubGFiZWwgPSBvcFsxXTsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDYgJiYgXy5sYWJlbCA8IHRbMV0pIHsgXy5sYWJlbCA9IHRbMV07IHQgPSBvcDsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodCAmJiBfLmxhYmVsIDwgdFsyXSkgeyBfLmxhYmVsID0gdFsyXTsgXy5vcHMucHVzaChvcCk7IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRbMl0pIF8ub3BzLnBvcCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIF8udHJ5cy5wb3AoKTsgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgb3AgPSBib2R5LmNhbGwodGhpc0FyZywgXyk7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkgeyBvcCA9IFs2LCBlXTsgeSA9IDA7IH0gZmluYWxseSB7IGYgPSB0ID0gMDsgfVxyXG4gICAgICAgIGlmIChvcFswXSAmIDUpIHRocm93IG9wWzFdOyByZXR1cm4geyB2YWx1ZTogb3BbMF0gPyBvcFsxXSA6IHZvaWQgMCwgZG9uZTogdHJ1ZSB9O1xyXG4gICAgfVxyXG59O1xyXG4vKipcclxuICogU2ltcGxlIHdyYXBwZXIgYXJvdW5kIGZldGNoIEFQSSB0YWlsb3JlZCBmb3IgQ0VGL05VSSB1c2UuXHJcbiAqIEBwYXJhbSBldmVudE5hbWUgLSBUaGUgZW5kcG9pbnQgZXZlbnRuYW1lIHRvIHRhcmdldFxyXG4gKiBAcGFyYW0gZGF0YSAtIERhdGEgeW91IHdpc2ggdG8gc2VuZCBpbiB0aGUgTlVJIENhbGxiYWNrXHJcbiAqXHJcbiAqIEByZXR1cm4gcmV0dXJuRGF0YSAtIEEgcHJvbWlzZSBmb3IgdGhlIGRhdGEgc2VudCBiYWNrIGJ5IHRoZSBOdWlDYWxsYmFja3MgQ0IgYXJndW1lbnRcclxuICovXHJcbmltcG9ydCB7IGlzRW52QnJvd3NlciB9IGZyb20gJy4vbWlzYyc7XHJcbmZ1bmN0aW9uIGZldGNoTnVpKGV2ZW50TmFtZSwgZGF0YSwgbW9ja1Jlc3ApIHtcclxuICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgb3B0aW9ucywgcmVzb3VyY2VOYW1lLCByZXNwLCByZXNwb25zZU9iajtcclxuICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdwb3N0JyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PVVURi04JyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YSksXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNFbnZCcm93c2VyKCkgJiYgbW9ja1Jlc3ApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIG1vY2tSZXNwXTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb3VyY2VOYW1lID0gXCJucHdkX3FiX2dhcmFnZVwiO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGZldGNoKFwiaHR0cHM6Ly9cIi5jb25jYXQocmVzb3VyY2VOYW1lLCBcIi9cIikuY29uY2F0KGV2ZW50TmFtZSksIG9wdGlvbnMpXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICByZXNwID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHJlc3AuanNvbigpXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICByZXNwb25zZU9iaiA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgcmVzcG9uc2VPYmpdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxyXG5leHBvcnQgZGVmYXVsdCBmZXRjaE51aTtcclxuIiwiZXhwb3J0IHZhciBpc0VudkJyb3dzZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICByZXR1cm4gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcgJiYgIXdpbmRvdy5pbnZva2VOYXRpdmU7XHJcbn07XHJcbmV4cG9ydCB2YXIgZ2V0UmVzb3VyY2VOYW1lID0gZnVuY3Rpb24gKCkge1xyXG4gICAgcmV0dXJuIHdpbmRvdy5HZXRQYXJlbnRSZXNvdXJjZU5hbWUgPyB3aW5kb3cgPT09IG51bGwgfHwgd2luZG93ID09PSB2b2lkIDAgPyB2b2lkIDAgOiB3aW5kb3cuR2V0UGFyZW50UmVzb3VyY2VOYW1lKCkgOiAnbnB3ZCc7XHJcbn07XHJcbmV4cG9ydCB2YXIgYnVpbGRSZXNwT2JqID0gZnVuY3Rpb24gKGRhdGEsIHN0YXR1cywgZXJyb3JNc2cpIHsgcmV0dXJuICh7XHJcbiAgICBkYXRhOiBkYXRhLFxyXG4gICAgc3RhdHVzOiBzdGF0dXMsXHJcbiAgICBlcnJvck1zZzogZXJyb3JNc2csXHJcbn0pOyB9O1xyXG4iXSwibmFtZXMiOlsiY3giLCJjeSIsInIiLCJkIiwiR2FyYWdlSWNvbiIsImZvbnRTaXplIiwiZXh0ZXJuYWxBcHBDb25maWciLCJpZCIsIm5hbWVMb2NhbGUiLCJjb2xvciIsImJhY2tncm91bmRDb2xvciIsInBhdGgiLCJpY29uIiwiYXBwIiwidGhlbWUiLCJjb29rZWQiLCJyYXciLCJfX2Fzc2lnbiIsIk9iamVjdCIsImFzc2lnbiIsInQiLCJzIiwiaSIsIm4iLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJwIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiYXBwbHkiLCJ0aGlzIiwiQ29udGFpbmVyIiwidGVtcGxhdGVPYmplY3RfMSIsImRlZmluZVByb3BlcnR5IiwidmFsdWUiLCJfYSIsImlzRGFya01vZGUiLCJBcHAiLCJwcm9wcyIsImhpc3RvcnkiLCJ1c2VIaXN0b3J5IiwidXNlU3RhdGUiLCJ2ZWhpY2xlcyIsInNldFZlaGljbGVzIiwiX2IiLCJtYXBwZWRWZWgiLCJzZXRNYXBwZWRWZWgiLCJwYWxldHRlIiwibW9kZSIsInVzZUVmZmVjdCIsInRoZW4iLCJyZXNwIiwiZGF0YSIsIm1hcHBlZFZlaGljbGVzIiwicmVkdWNlIiwidmVocyIsInZlaGljbGUiLCJ0eXBlIiwicHVzaCIsImluamVjdEZpcnN0Iiwib25DbGljayIsImdvQmFjayIsImZvbnRXZWlnaHQiLCJOdWlQcm92aWRlciIsIkFQUF9QUklNQVJZX0NPTE9SIiwiQVBQX1RFWFRfQ09MT1IiLCJwcmltYXJ5IiwibWFpbiIsImRhcmsiLCJsaWdodCIsImNvbnRyYXN0VGV4dCIsInNlY29uZGFyeSIsInN1Y2Nlc3MiLCJ2ZWgiLCJzeCIsIndpZHRoIiwiZGlzYWJsZVBhZGRpbmciLCJib3JkZXJCb3R0b20iLCJtYiIsIm1sIiwibXIiLCJtaW5XaWR0aCIsInRpdGxlIiwiZ2FyYWdlTGFiZWwiLCJNYXRoIiwiY2VpbCIsImVuZ2luZSIsImZ1ZWwiLCJib2R5IiwiZGlzcGxheSIsInZhcmlhbnQiLCJwbGF0ZSIsInN0YXRlIiwiZ2FyYWdlIiwiVmVoaWNsZUxpc3QiLCJjb2xsYXBzZUlkIiwic2V0Q29sbGFwc2VJZCIsInR5cGVJY29uIiwiY2FyIiwic3RhdHVzIiwib3V0IiwiZ2FyYWdlZCIsImltcG91bmRlZCIsInNlaXplZCIsInVua25vd24iLCJhaXJjcmFmdCIsImJvYXQiLCJiaWtlIiwia2V5cyIsIm1hcCIsImtleSIsInN1YmhlYWRlciIsImN1cnNvciIsInBvc2l0aW9uIiwidG9VcHBlckNhc2UiLCJpbiIsImJvcmRlckJvdHRvbUNvbG9yIiwianVzdGlmeUNvbnRlbnQiLCJhbGlnbkl0ZW1zIiwiZ2FwIiwic3BhY2luZyIsImJyYW5kIiwiZmxleERpcmVjdGlvbiIsIkhlYWRlciIsIm1hcmdpbkJvdHRvbSIsImV2ZW50TmFtZSIsIm1vY2tSZXNwIiwidGhpc0FyZyIsIl9hcmd1bWVudHMiLCJnZW5lcmF0b3IiLCJvcHRpb25zIiwiZiIsInkiLCJnIiwiXyIsImxhYmVsIiwic2VudCIsInRyeXMiLCJvcHMiLCJuZXh0IiwidmVyYiIsIlN5bWJvbCIsIml0ZXJhdG9yIiwidiIsIm9wIiwiVHlwZUVycm9yIiwiZG9uZSIsInBvcCIsImUiLCJzdGVwIiwiX19nZW5lcmF0b3IiLCJtZXRob2QiLCJoZWFkZXJzIiwiSlNPTiIsInN0cmluZ2lmeSIsImZldGNoIiwiY29uY2F0IiwianNvbiIsIlAiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsImZ1bGZpbGxlZCIsInJlamVjdGVkIiwicmVzdWx0IiwiaXNFbnZCcm93c2VyIl0sInNvdXJjZVJvb3QiOiIifQ==