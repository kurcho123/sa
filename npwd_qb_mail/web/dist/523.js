"use strict";(self.webpackChunknpwd_qb_mail=self.webpackChunknpwd_qb_mail||[]).push([[523],{8320:(e,t,n)=>{n.d(t,{Y8:()=>u,LT:()=>d,JV:()=>p,Wu:()=>c,Ng:()=>s,YQ:()=>f});var r=n(5137),a=[{mailid:2,sender:"Eduardo",subject:"Delivery Location",message:"Here is all info about the delivery, <br><br>Items: <br> 1x Weed Brick<br><br> Be on time!!",read:0,date:1660745412e3,button:{buttonEvent:"qb-drugs:client:setLocation",enabled:!0,buttonData:{dealer:"Eduardo",itemData:{minrep:0,item:"weed_brick"},amount:2,locationLabel:"DR Kush",coords:{x:-1151.9300537109375,y:-1447.5899658203125,z:4.71000003814697}}}},{mailid:1,sender:"Billing Department",subject:"Invoice Paid",message:"Invoice Has Been Paid From Sienna Dunlap In The Amount Of $425",read:1,date:1660653186e3}],i=n(5181),o=n(7405),l={mailItems:(0,r.atom)({key:"mailItem",default:(0,r.selector)({key:"defaultMailItems",get:function(){return e=void 0,t=void 0,r=function(){var e,t;return function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!((a=(a=o.trys).length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}}(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,(0,o.Z)("npwd:qb-mail:getMail")];case 1:return(e=n.sent()).data?[2,e.data]:(console.log("no response data"),[2,[]]);case 2:return t=n.sent(),(0,i.Id)()?[2,a]:(console.error(t),[2,[]]);case 3:return[2]}}))},new((n=void 0)||(n=Promise))((function(a,i){function o(e){try{u(r.next(e))}catch(e){i(e)}}function l(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}u((r=r.apply(e,t||[])).next())}));var e,t,n,r}})}),selectedMail:(0,r.atom)({key:"selectedMail",default:null}),modalVisibile:(0,r.atom)({key:"mailModalVisible",default:!1})},u=function(){return(0,r.useRecoilValue)(l.mailItems)},c=function(){return(0,r.useSetRecoilState)(l.mailItems)},s=function(){return(0,r.useSetRecoilState)(l.modalVisibile)},d=function(){return(0,r.useRecoilState)(l.modalVisibile)},f=function(){return(0,r.useSetRecoilState)(l.selectedMail)},p=function(){return(0,r.useRecoilState)(l.selectedMail)}},1551:(e,t,n)=>{n.d(t,{Z:()=>u});var r=n(2950),a=n.n(r),i=n(4274),o=n(1508),l=n(2658);const u=function(){return a().createElement(o.Z,{px:2,pt:2,sx:{width:"100%",textAlign:"left",backgroundColor:i.A1}},a().createElement(l.Z,{sx:{color:i.Iw},paragraph:!0,variant:"h5"},"Mail"))}},620:(e,t,n)=>{n.d(t,{Z:()=>m});var r=n(2950),a=n.n(r),i=n(1508),o=n(2658),l=n(2440),u=n(5266),c=n(8320),s=n(870),d=n(5475),f=n(4766),p=n(4274);const m=function(e){var t=e.isDarkMode,n=(0,c.Y8)(),m=(0,c.YQ)(),h=(0,c.Ng)(),b=(0,s.F)().updateRead,y=(0,f.C)().newMail,v=(0,d.useNuiEvent)({event:"npwd:qb-mail:newMail"}).data;return(0,r.useEffect)((function(){v&&y(v[0])}),[v]),n&&0!==n.length?a().createElement(l.Z,{disablePadding:!0},n.map((function(e){return a().createElement(u.ZP,{key:e.mailid,button:!0,divider:!0,onClick:function(){return function(e){e.read||b(e.mailid),m(e),h(!0)}(e)}},0===e.read?a().createElement(i.Z,{sx:{bgcolor:"#4260f5",borderRadius:"10px",minWidth:"8px",minHeight:"8px",marginRight:"10px"}}):a().createElement(i.Z,{sx:{borderRadius:"10px",minWidth:"8px",minHeight:"8px",marginRight:"10px"}}),a().createElement(i.Z,{sx:{display:"flex",flexDirection:"column",width:"100%"}},a().createElement(i.Z,{sx:{display:"flex",flexDirection:"row",width:"100%",justifyContent:"space-between"}},a().createElement(o.Z,{sx:{fontWeight:"500",color:t?"#fff":"#000"}},e.sender),a().createElement(i.Z,{sx:{display:"flex",flexDirection:"column"}},a().createElement(o.Z,{sx:{color:"#dedede",fontSize:"13px"}},(n=e.date,("0"+(r=new Date(n)).getDate()).slice(-2)+"/"+("0"+(r.getMonth()+1)).slice(-2)+"/"+r.getFullYear())))),a().createElement(o.Z,{sx:{color:t?"#fff":"#000"}},e.subject)));var n,r}))):a().createElement(i.Z,{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",height:"100%"},a().createElement(o.Z,{variant:"h6",style:{fontWeight:300,color:p.Iw}},"You have no mail"))}},4530:(e,t,n)=>{n.d(t,{Z:()=>v});var r=n(2950),a=n.n(r),i=n(8320),o=n(4776),l=n(6501),u=n(6089),c=n(1508),s=n(6914),d=n(2658),f=n(2116),p=n(1023),m=n(5181),h=n(870),b=n(2265),y=n.n(b);const v=function(){var e=(0,i.LT)(),t=e[0],n=e[1],r=(0,i.JV)(),b=r[0],v=r[1],x=(0,h.F)(),g=x.deleteMail,w=x.updateMailButton;if(null===b)return null;var E=y()(b.message,{whiteList:{br:[],strong:[]}});return a().createElement(o.Z,{direction:"left",in:t,mountOnEnter:!0,unmountOnExit:!0,onExited:function(){v(null)}},a().createElement(l.Z,{sx:{position:"absolute",zIndex:20,height:"100%",width:"100%"},square:!0},a().createElement(u.Z,{sx:{height:"100%"}},a().createElement(c.Z,{sx:{height:"100%"}},a().createElement(c.Z,{pt:2,pb:1},a().createElement(s.Z,{color:"secondary",size:"large",startIcon:a().createElement(p.Z,{fontSize:"large"}),onClick:function(){n(!1)}},"INBOX")),a().createElement(c.Z,{pl:1,pb:"12px"},a().createElement(d.Z,{sx:{fontSize:"20px",fontWeight:500}},b.sender),a().createElement(d.Z,{sx:{fontSize:"19px"}},b.subject),b.date&&a().createElement(d.Z,{sx:{fontSize:"15px",color:"#dedede"}},(0,m.ur)(b.date))),a().createElement(f.Z,null),b.message&&a().createElement(c.Z,{pl:1,pt:"12px",sx:{fontSize:"18px",height:"70%"},dangerouslySetInnerHTML:{__html:E}}),a().createElement(c.Z,{display:"inline",p:1,sx:{display:"flex",gap:"15px",justifyContent:"center"}},void 0!==b.button&&null!==b.button&&a().createElement(s.Z,{color:"success",variant:"contained",onClick:function(){w({mailid:b.mailid,button:b.button}).then((function(){n(!1)})).catch(console.error)}},"ACCEPT"),a().createElement(s.Z,{color:"error",variant:"contained",onClick:function(){g(b.mailid).then((function(){n(!1)})).catch(console.error)}},"DELETE"))))))}},870:(e,t,n)=>{n.d(t,{F:()=>c});var r=n(2950),a=n(721),i=n(4766),o=n(7405),l=function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{u(r.next(e))}catch(e){i(e)}}function l(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}u((r=r.apply(e,t||[])).next())}))},u=function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!((a=(a=o.trys).length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}},c=function(){var e=(0,a.D)().addAlert,t=(0,i.C)(),n=t.updateReadState,c=t.deleteLocalMail,s=t.updateLocalButton,d=(0,r.useCallback)((function(e){return l(void 0,void 0,void 0,(function(){return u(this,(function(t){switch(t.label){case 0:return[4,(0,o.Z)("npwd:qb-mail:updateRead",e)];case 1:return t.sent(),n(e),[2]}}))}))}),[n]),f=(0,r.useCallback)((function(t){return l(void 0,void 0,void 0,(function(){return u(this,(function(n){switch(n.label){case 0:return[4,(0,o.Z)("npwd:qb-mail:deleteMail",t)];case 1:return"ok"!==n.sent().status?[2,e({message:"Failed to delete mail",type:"error"})]:(c(t),e({message:"Successfully deleted mail",type:"success"}),[2])}}))}))}),[e,c]),p=(0,r.useCallback)((function(t){var n=t.mailid,r=t.button;return l(void 0,void 0,void 0,(function(){return u(this,(function(t){switch(t.label){case 0:return[4,(0,o.Z)("npwd:qb-mail:updateButton",{mailid:n,button:r})];case 1:return"ok"!==t.sent().status?[2,e({message:"Failed to accept mail",type:"error"})]:(s(n),e({message:"Successfully accepted mail",type:"success"}),[2])}}))}))}),[e,s]);return{updateRead:d,deleteMail:f,updateMailButton:p}}},4766:(e,t,n)=>{n.d(t,{C:()=>l});var r=n(8320),a=n(2950),i=function(){return i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},i.apply(this,arguments)},o=function(e,t,n){if(n||2===arguments.length)for(var r,a=0,i=t.length;a<i;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))},l=function(){var e=(0,r.Wu)(),t=(0,a.useCallback)((function(t){e((function(e){return e.map((function(e){return e.mailid===t?i(i({},e),{read:1}):e}))}))}),[e]),n=(0,a.useCallback)((function(t){e((function(e){return o([t],e,!0)}))}),[e]),l=(0,a.useCallback)((function(t){e((function(e){var n=e.findIndex((function(e){return e.mailid===t})),r=o([],e,!0);return r[n].button=null,r}))}),[e]);return{updateReadState:t,deleteLocalMail:(0,a.useCallback)((function(t){e((function(e){return o([],e,!0).filter((function(e){return e.mailid!==t}))}))}),[e]),updateLocalButton:l,newMail:n}}},4714:(e,t,n)=>{n.d(t,{v:()=>d});var r=n(2950),a=n.n(r),i=n(5282),o=n(721),l=n(442),u=n(2658),c=function(){return c=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},c.apply(this,arguments)};const s=(0,r.forwardRef)((function(e,t){return a().createElement(l.Z,c({sx:{zIndex:1e4},elevation:4,variant:"filled"},e,{ref:t}),a().createElement(u.Z,{sx:{maxWidth:"300px",wordWrap:"break-word",fontSize:"1.1em"}},e.children))}));var d=function(){var e,t=(0,o.D)(),n=t.alert,r=t.isOpen,l=t.handleClose;return a().createElement(i.Z,{autoHideDuration:null!==(e=null==n?void 0:n.duration)&&void 0!==e?e:3e3,open:r,sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"auto",position:"absolute",bottom:75,left:"0 !important",right:"0 !important"},onClose:l},a().createElement(s,{severity:(null==n?void 0:n.type)||"info",onClose:l},(null==n?void 0:n.message)||""))}},602:(e,t,n)=>{n.d(t,{S:()=>i,Z:()=>o});var r=n(2950),a=n.n(r),i=(0,r.createContext)(null);const o=function(e){var t=e.children,n=(0,r.useState)(!1),o=n[0],l=n[1],u=(0,r.useState)(null),c=u[0],s=u[1];return a().createElement(i.Provider,{value:{alert:c,addAlert:function(e){s(e),l(!0)},handleClose:function(){l(!1)},isOpen:o}},t)}},721:(e,t,n)=>{n.d(t,{D:()=>i});var r=n(2950),a=n(602),i=function(){return(0,r.useContext)(a.S)}},7405:(e,t,n)=>{n.d(t,{Z:()=>a});var r=n(5181);const a=function(e,t,n){return a=this,i=void 0,l=function(){var a;return function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!((a=(a=o.trys).length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}}(this,(function(i){switch(i.label){case 0:return a={method:"post",headers:{"Content-Type":"application/json; charset=UTF-8"},body:JSON.stringify(t)},(0,r.Id)()&&n?[2,n]:[4,fetch("https://".concat("npwd_qb_mail","/").concat(e),a)];case 1:return[4,i.sent().json()];case 2:return[2,i.sent()]}}))},new((o=void 0)||(o=Promise))((function(e,t){function n(e){try{u(l.next(e))}catch(e){t(e)}}function r(e){try{u(l.throw(e))}catch(e){t(e)}}function u(t){var a;t.done?e(t.value):(a=t.value,a instanceof o?a:new o((function(e){e(a)}))).then(n,r)}u((l=l.apply(a,i||[])).next())}));var a,i,o,l}},5181:(e,t,n)=>{n.d(t,{Id:()=>r,ur:()=>o});var r=function(){return!1},a=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],i=["January","February","March","April","May","June","July","August","September","October","November","December"],o=function(e){var t=new Date(e);return a[t.getDay()]+", "+i[t.getMonth()]+" "+("0"+t.getDate()).slice(-2)+" "+t.getFullYear()+" "+t.getHours()+":"+t.getMinutes()}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QVVkLEVBQVNDLEVBQVlxQyxFQUFHcEMsSSwwQ0NBdkUsSUFBSXVNLEVBQWUsV0FDdEIsT0FBTyxHQVVQQyxFQUFnQixDQUNoQixTQUNBLFNBQ0EsVUFDQSxZQUNBLFdBQ0EsU0FDQSxZQUVBQyxFQUFrQixDQUNsQixVQUNBLFdBQ0EsUUFDQSxRQUNBLE1BQ0EsT0FDQSxPQUNBLFNBQ0EsWUFDQSxVQUNBLFdBQ0EsWUFFT0MsRUFBYSxTQUFVQyxHQUM5QixJQUFJbk8sRUFBTyxJQUFJbUgsS0FBS2dILEdBQ3BCLE9BQVFILEVBQWNoTyxFQUFLb08sVUFDdkIsS0FDQUgsRUFBZ0JqTyxFQUFLc0gsWUFDckIsS0FDQyxJQUFNdEgsRUFBS29ILFdBQVdDLE9BQU8sR0FDOUIsSUFDQXJILEVBQUt1SCxjQUNMLElBQ0F2SCxFQUFLcU8sV0FDTCxJQUNBck8sRUFBS3NPIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbnB3ZF9xYl9tYWlsLy4vc3JjL3V0aWxzL2NvbnN0YW50cy50cyIsIndlYnBhY2s6Ly9ucHdkX3FiX21haWwvLi9zcmMvYXRvbXMvbWFpbC1hdG9tcy50cyIsIndlYnBhY2s6Ly9ucHdkX3FiX21haWwvLi9zcmMvY29tcG9uZW50cy9IZWFkZXIudHN4Iiwid2VicGFjazovL25wd2RfcWJfbWFpbC8uL3NyYy9jb21wb25lbnRzL01haWxMaXN0LnRzeCIsIndlYnBhY2s6Ly9ucHdkX3FiX21haWwvLi9zcmMvY29tcG9uZW50cy9NYWlsTW9kYWwudHN4Iiwid2VicGFjazovL25wd2RfcWJfbWFpbC8uL3NyYy9ob29rcy91c2VNYWlsQVBJLnRzIiwid2VicGFjazovL25wd2RfcWJfbWFpbC8uL3NyYy9ob29rcy91c2VNYWlsQWN0aW9ucy50cyIsIndlYnBhY2s6Ly9ucHdkX3FiX21haWwvLi9zcmMvc25hY2tiYXIvQWxlcnQudHN4Iiwid2VicGFjazovL25wd2RfcWJfbWFpbC8uL3NyYy9zbmFja2Jhci9QaG9uZVNuYWNrYmFyLnRzeCIsIndlYnBhY2s6Ly9ucHdkX3FiX21haWwvLi9zcmMvc25hY2tiYXIvU25hY2tiYXJQcm92aWRlci50c3giLCJ3ZWJwYWNrOi8vbnB3ZF9xYl9tYWlsLy4vc3JjL3NuYWNrYmFyL3VzZVNuYWNrYmFyLnRzIiwid2VicGFjazovL25wd2RfcWJfbWFpbC8uL3NyYy91dGlscy9mZXRjaE51aS50cyIsIndlYnBhY2s6Ly9ucHdkX3FiX21haWwvLi9zcmMvdXRpbHMvbWlzYy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgdmFyIE1vY2tNYWlsID0gW1xyXG4gICAge1xyXG4gICAgICAgIG1haWxpZDogMixcclxuICAgICAgICBzZW5kZXI6ICdFZHVhcmRvJyxcclxuICAgICAgICBzdWJqZWN0OiAnRGVsaXZlcnkgTG9jYXRpb24nLFxyXG4gICAgICAgIG1lc3NhZ2U6ICdIZXJlIGlzIGFsbCBpbmZvIGFib3V0IHRoZSBkZWxpdmVyeSwgPGJyPjxicj5JdGVtczogPGJyPiAxeCBXZWVkIEJyaWNrPGJyPjxicj4gQmUgb24gdGltZSEhJyxcclxuICAgICAgICByZWFkOiAwLFxyXG4gICAgICAgIGRhdGU6IDE2NjA3NDU0MTIwMDAsXHJcbiAgICAgICAgYnV0dG9uOiB7XHJcbiAgICAgICAgICAgIGJ1dHRvbkV2ZW50OiAncWItZHJ1Z3M6Y2xpZW50OnNldExvY2F0aW9uJyxcclxuICAgICAgICAgICAgZW5hYmxlZDogdHJ1ZSxcclxuICAgICAgICAgICAgYnV0dG9uRGF0YToge1xyXG4gICAgICAgICAgICAgICAgZGVhbGVyOiAnRWR1YXJkbycsXHJcbiAgICAgICAgICAgICAgICBpdGVtRGF0YToge1xyXG4gICAgICAgICAgICAgICAgICAgIG1pbnJlcDogMCxcclxuICAgICAgICAgICAgICAgICAgICBpdGVtOiAnd2VlZF9icmljaycsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgYW1vdW50OiAyLFxyXG4gICAgICAgICAgICAgICAgbG9jYXRpb25MYWJlbDogJ0RSIEt1c2gnLFxyXG4gICAgICAgICAgICAgICAgY29vcmRzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgeDogLTExNTEuOTMwMDUzNzEwOTM3NSxcclxuICAgICAgICAgICAgICAgICAgICB5OiAtMTQ0Ny41ODk5NjU4MjAzMTI1LFxyXG4gICAgICAgICAgICAgICAgICAgIHo6IDQuNzEwMDAwMDM4MTQ2OTcsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH0sXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIG1haWxpZDogMSxcclxuICAgICAgICBzZW5kZXI6ICdCaWxsaW5nIERlcGFydG1lbnQnLFxyXG4gICAgICAgIHN1YmplY3Q6ICdJbnZvaWNlIFBhaWQnLFxyXG4gICAgICAgIG1lc3NhZ2U6ICdJbnZvaWNlIEhhcyBCZWVuIFBhaWQgRnJvbSBTaWVubmEgRHVubGFwIEluIFRoZSBBbW91bnQgT2YgJDQyNScsXHJcbiAgICAgICAgcmVhZDogMSxcclxuICAgICAgICBkYXRlOiAxNjYwNjUzMTg2MDAwLjAsXHJcbiAgICB9LFxyXG5dO1xyXG4iLCJ2YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcclxuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxyXG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XHJcbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xyXG4gICAgfSk7XHJcbn07XHJcbnZhciBfX2dlbmVyYXRvciA9ICh0aGlzICYmIHRoaXMuX19nZW5lcmF0b3IpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBib2R5KSB7XHJcbiAgICB2YXIgXyA9IHsgbGFiZWw6IDAsIHNlbnQ6IGZ1bmN0aW9uKCkgeyBpZiAodFswXSAmIDEpIHRocm93IHRbMV07IHJldHVybiB0WzFdOyB9LCB0cnlzOiBbXSwgb3BzOiBbXSB9LCBmLCB5LCB0LCBnO1xyXG4gICAgcmV0dXJuIGcgPSB7IG5leHQ6IHZlcmIoMCksIFwidGhyb3dcIjogdmVyYigxKSwgXCJyZXR1cm5cIjogdmVyYigyKSB9LCB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgKGdbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSksIGc7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgcmV0dXJuIGZ1bmN0aW9uICh2KSB7IHJldHVybiBzdGVwKFtuLCB2XSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHN0ZXAob3ApIHtcclxuICAgICAgICBpZiAoZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy5cIik7XHJcbiAgICAgICAgd2hpbGUgKF8pIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChmID0gMSwgeSAmJiAodCA9IG9wWzBdICYgMiA/IHlbXCJyZXR1cm5cIl0gOiBvcFswXSA/IHlbXCJ0aHJvd1wiXSB8fCAoKHQgPSB5W1wicmV0dXJuXCJdKSAmJiB0LmNhbGwoeSksIDApIDogeS5uZXh0KSAmJiAhKHQgPSB0LmNhbGwoeSwgb3BbMV0pKS5kb25lKSByZXR1cm4gdDtcclxuICAgICAgICAgICAgaWYgKHkgPSAwLCB0KSBvcCA9IFtvcFswXSAmIDIsIHQudmFsdWVdO1xyXG4gICAgICAgICAgICBzd2l0Y2ggKG9wWzBdKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6IGNhc2UgMTogdCA9IG9wOyBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgNDogXy5sYWJlbCsrOyByZXR1cm4geyB2YWx1ZTogb3BbMV0sIGRvbmU6IGZhbHNlIH07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDU6IF8ubGFiZWwrKzsgeSA9IG9wWzFdOyBvcCA9IFswXTsgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDc6IG9wID0gXy5vcHMucG9wKCk7IF8udHJ5cy5wb3AoKTsgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghKHQgPSBfLnRyeXMsIHQgPSB0Lmxlbmd0aCA+IDAgJiYgdFt0Lmxlbmd0aCAtIDFdKSAmJiAob3BbMF0gPT09IDYgfHwgb3BbMF0gPT09IDIpKSB7IF8gPSAwOyBjb250aW51ZTsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gMyAmJiAoIXQgfHwgKG9wWzFdID4gdFswXSAmJiBvcFsxXSA8IHRbM10pKSkgeyBfLmxhYmVsID0gb3BbMV07IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSA2ICYmIF8ubGFiZWwgPCB0WzFdKSB7IF8ubGFiZWwgPSB0WzFdOyB0ID0gb3A7IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHQgJiYgXy5sYWJlbCA8IHRbMl0pIHsgXy5sYWJlbCA9IHRbMl07IF8ub3BzLnB1c2gob3ApOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0WzJdKSBfLm9wcy5wb3AoKTtcclxuICAgICAgICAgICAgICAgICAgICBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG9wID0gYm9keS5jYWxsKHRoaXNBcmcsIF8pO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHsgb3AgPSBbNiwgZV07IHkgPSAwOyB9IGZpbmFsbHkgeyBmID0gdCA9IDA7IH1cclxuICAgICAgICBpZiAob3BbMF0gJiA1KSB0aHJvdyBvcFsxXTsgcmV0dXJuIHsgdmFsdWU6IG9wWzBdID8gb3BbMV0gOiB2b2lkIDAsIGRvbmU6IHRydWUgfTtcclxuICAgIH1cclxufTtcclxuaW1wb3J0IHsgYXRvbSwgc2VsZWN0b3IsIHVzZVJlY29pbFN0YXRlLCB1c2VSZWNvaWxWYWx1ZSwgdXNlU2V0UmVjb2lsU3RhdGUgfSBmcm9tICdyZWNvaWwnO1xyXG5pbXBvcnQgeyBNb2NrTWFpbCB9IGZyb20gJy4uL3V0aWxzL2NvbnN0YW50cyc7XHJcbmltcG9ydCB7IGlzRW52QnJvd3NlciB9IGZyb20gJy4uL3V0aWxzL21pc2MnO1xyXG5pbXBvcnQgZmV0Y2hOdWkgZnJvbSAnLi4vdXRpbHMvZmV0Y2hOdWknO1xyXG5leHBvcnQgdmFyIG1haWxTdGF0ZXMgPSB7XHJcbiAgICBtYWlsSXRlbXM6IGF0b20oe1xyXG4gICAgICAgIGtleTogJ21haWxJdGVtJyxcclxuICAgICAgICBkZWZhdWx0OiBzZWxlY3Rvcih7XHJcbiAgICAgICAgICAgIGtleTogJ2RlZmF1bHRNYWlsSXRlbXMnLFxyXG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIF9fYXdhaXRlcih2b2lkIDAsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcmVzcCwgZV8xO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2EudHJ5cy5wdXNoKFswLCAyLCAsIDNdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGZldGNoTnVpKCducHdkOnFiLW1haWw6Z2V0TWFpbCcpXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzcCA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcmVzcC5kYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ25vIHJlc3BvbnNlIGRhdGEnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgW11dO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHJlc3AuZGF0YV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVfMSA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc0VudkJyb3dzZXIoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBNb2NrTWFpbF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVfMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgW11dO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6IHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7IH0sXHJcbiAgICAgICAgfSksXHJcbiAgICB9KSxcclxuICAgIHNlbGVjdGVkTWFpbDogYXRvbSh7XHJcbiAgICAgICAga2V5OiAnc2VsZWN0ZWRNYWlsJyxcclxuICAgICAgICBkZWZhdWx0OiBudWxsLFxyXG4gICAgfSksXHJcbiAgICBtb2RhbFZpc2liaWxlOiBhdG9tKHtcclxuICAgICAgICBrZXk6ICdtYWlsTW9kYWxWaXNpYmxlJyxcclxuICAgICAgICBkZWZhdWx0OiBmYWxzZSxcclxuICAgIH0pLFxyXG59O1xyXG5leHBvcnQgdmFyIHVzZU1haWxzVmFsdWUgPSBmdW5jdGlvbiAoKSB7IHJldHVybiB1c2VSZWNvaWxWYWx1ZShtYWlsU3RhdGVzLm1haWxJdGVtcyk7IH07XHJcbmV4cG9ydCB2YXIgdXNlU2V0TWFpbCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHVzZVNldFJlY29pbFN0YXRlKG1haWxTdGF0ZXMubWFpbEl0ZW1zKTsgfTtcclxuZXhwb3J0IHZhciB1c2VTZXRNb2RhbFZpc2libGUgPSBmdW5jdGlvbiAoKSB7IHJldHVybiB1c2VTZXRSZWNvaWxTdGF0ZShtYWlsU3RhdGVzLm1vZGFsVmlzaWJpbGUpOyB9O1xyXG5leHBvcnQgdmFyIHVzZU1vZGFsVmlzaWJsZSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHVzZVJlY29pbFN0YXRlKG1haWxTdGF0ZXMubW9kYWxWaXNpYmlsZSk7IH07XHJcbmV4cG9ydCB2YXIgdXNlU2V0U2VsZWN0ZWRNYWlsID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdXNlU2V0UmVjb2lsU3RhdGUobWFpbFN0YXRlcy5zZWxlY3RlZE1haWwpOyB9O1xyXG5leHBvcnQgdmFyIHVzZVNlbGVjdGVkTWFpbCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHVzZVJlY29pbFN0YXRlKG1haWxTdGF0ZXMuc2VsZWN0ZWRNYWlsKTsgfTtcclxuIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgTUFJTF9BUFBfUFJJTUFSWV9DT0xPUiwgTUFJTF9BUFBfVEVYVF9DT0xPUiB9IGZyb20gJy4uL2FwcC50aGVtZSc7XHJcbmltcG9ydCB7IFR5cG9ncmFwaHksIEJveCB9IGZyb20gJ0BtdWkvbWF0ZXJpYWwnO1xyXG52YXIgSGVhZGVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgcmV0dXJuIChSZWFjdC5jcmVhdGVFbGVtZW50KEJveCwgeyBweDogMiwgcHQ6IDIsIHN4OiB7IHdpZHRoOiAnMTAwJScsIHRleHRBbGlnbjogJ2xlZnQnLCBiYWNrZ3JvdW5kQ29sb3I6IE1BSUxfQVBQX1BSSU1BUllfQ09MT1IgfSB9LFxyXG4gICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoVHlwb2dyYXBoeSwgeyBzeDogeyBjb2xvcjogTUFJTF9BUFBfVEVYVF9DT0xPUiB9LCBwYXJhZ3JhcGg6IHRydWUsIHZhcmlhbnQ6ICdoNScgfSwgXCJNYWlsXCIpKSk7XHJcbn07XHJcbmV4cG9ydCBkZWZhdWx0IEhlYWRlcjtcclxuIiwiaW1wb3J0IFJlYWN0LCB7IHVzZUVmZmVjdCB9IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgQm94LCBMaXN0LCBMaXN0SXRlbSwgVHlwb2dyYXBoeSB9IGZyb20gJ0BtdWkvbWF0ZXJpYWwnO1xyXG5pbXBvcnQgeyB1c2VNYWlsc1ZhbHVlLCB1c2VTZXRTZWxlY3RlZE1haWwsIHVzZVNldE1vZGFsVmlzaWJsZSB9IGZyb20gJy4uL2F0b21zL21haWwtYXRvbXMnO1xyXG5pbXBvcnQgeyB1c2VNYWlsQVBJIH0gZnJvbSAnLi4vaG9va3MvdXNlTWFpbEFQSSc7XHJcbmltcG9ydCB7IHVzZU51aUV2ZW50IH0gZnJvbSAncmVhY3QtZml2ZW0taG9va3MnO1xyXG5pbXBvcnQgeyB1c2VNYWlsQWN0aW9ucyB9IGZyb20gJy4uL2hvb2tzL3VzZU1haWxBY3Rpb25zJztcclxuaW1wb3J0IHsgTUFJTF9BUFBfVEVYVF9DT0xPUiB9IGZyb20gJy4uL2FwcC50aGVtZSc7XHJcbnZhciBNYWlsTGlzdCA9IGZ1bmN0aW9uIChfYSkge1xyXG4gICAgdmFyIGlzRGFya01vZGUgPSBfYS5pc0RhcmtNb2RlO1xyXG4gICAgdmFyIG1haWxzID0gdXNlTWFpbHNWYWx1ZSgpO1xyXG4gICAgdmFyIHNldE1haWwgPSB1c2VTZXRTZWxlY3RlZE1haWwoKTtcclxuICAgIHZhciBzZXRNb2RhbFZpc2libGUgPSB1c2VTZXRNb2RhbFZpc2libGUoKTtcclxuICAgIHZhciB1cGRhdGVSZWFkID0gdXNlTWFpbEFQSSgpLnVwZGF0ZVJlYWQ7XHJcbiAgICB2YXIgbmV3TWFpbCA9IHVzZU1haWxBY3Rpb25zKCkubmV3TWFpbDtcclxuICAgIHZhciBkYXRhID0gdXNlTnVpRXZlbnQoeyBldmVudDogJ25wd2Q6cWItbWFpbDpuZXdNYWlsJyB9KS5kYXRhO1xyXG4gICAgdXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoZGF0YSkge1xyXG4gICAgICAgICAgICBuZXdNYWlsKGRhdGFbMF0pO1xyXG4gICAgICAgIH1cclxuICAgIH0sIFtkYXRhXSk7XHJcbiAgICB2YXIgaGFuZGxlTWFpbE1vZGFsID0gZnVuY3Rpb24gKG1haWwpIHtcclxuICAgICAgICBpZiAoIW1haWwucmVhZCkge1xyXG4gICAgICAgICAgICB1cGRhdGVSZWFkKG1haWwubWFpbGlkKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgc2V0TWFpbChtYWlsKTtcclxuICAgICAgICBzZXRNb2RhbFZpc2libGUodHJ1ZSk7XHJcbiAgICB9O1xyXG4gICAgdmFyIG1haWxEYXRlID0gZnVuY3Rpb24gKGRhdGVEYXRhKSB7XHJcbiAgICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZShkYXRlRGF0YSk7XHJcbiAgICAgICAgcmV0dXJuICgoJzAnICsgZGF0ZS5nZXREYXRlKCkpLnNsaWNlKC0yKSArXHJcbiAgICAgICAgICAgICcvJyArXHJcbiAgICAgICAgICAgICgnMCcgKyAoZGF0ZS5nZXRNb250aCgpICsgMSkpLnNsaWNlKC0yKSArXHJcbiAgICAgICAgICAgICcvJyArXHJcbiAgICAgICAgICAgIGRhdGUuZ2V0RnVsbFllYXIoKSk7XHJcbiAgICB9O1xyXG4gICAgaWYgKCFtYWlscyB8fCBtYWlscy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICByZXR1cm4gKFJlYWN0LmNyZWF0ZUVsZW1lbnQoQm94LCB7IGRpc3BsYXk6IFwiZmxleFwiLCBqdXN0aWZ5Q29udGVudDogXCJjZW50ZXJcIiwgYWxpZ25JdGVtczogXCJjZW50ZXJcIiwgZmxleERpcmVjdGlvbjogXCJjb2x1bW5cIiwgaGVpZ2h0OiBcIjEwMCVcIiB9LFxyXG4gICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFR5cG9ncmFwaHksIHsgdmFyaWFudDogXCJoNlwiLCBzdHlsZTogeyBmb250V2VpZ2h0OiAzMDAsIGNvbG9yOiBNQUlMX0FQUF9URVhUX0NPTE9SIH0gfSwgXCJZb3UgaGF2ZSBubyBtYWlsXCIpKSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gKFJlYWN0LmNyZWF0ZUVsZW1lbnQoTGlzdCwgeyBkaXNhYmxlUGFkZGluZzogdHJ1ZSB9LCBtYWlscy5tYXAoZnVuY3Rpb24gKG1haWwpIHsgcmV0dXJuIChSZWFjdC5jcmVhdGVFbGVtZW50KExpc3RJdGVtLCB7IGtleTogbWFpbC5tYWlsaWQsIGJ1dHRvbjogdHJ1ZSwgZGl2aWRlcjogdHJ1ZSwgb25DbGljazogZnVuY3Rpb24gKCkgeyByZXR1cm4gaGFuZGxlTWFpbE1vZGFsKG1haWwpOyB9IH0sXHJcbiAgICAgICAgbWFpbC5yZWFkID09PSAwID8gKFJlYWN0LmNyZWF0ZUVsZW1lbnQoQm94LCB7IHN4OiB7XHJcbiAgICAgICAgICAgICAgICBiZ2NvbG9yOiAnIzQyNjBmNScsXHJcbiAgICAgICAgICAgICAgICBib3JkZXJSYWRpdXM6ICcxMHB4JyxcclxuICAgICAgICAgICAgICAgIG1pbldpZHRoOiAnOHB4JyxcclxuICAgICAgICAgICAgICAgIG1pbkhlaWdodDogJzhweCcsXHJcbiAgICAgICAgICAgICAgICBtYXJnaW5SaWdodDogJzEwcHgnLFxyXG4gICAgICAgICAgICB9IH0pKSA6IChSZWFjdC5jcmVhdGVFbGVtZW50KEJveCwgeyBzeDoge1xyXG4gICAgICAgICAgICAgICAgYm9yZGVyUmFkaXVzOiAnMTBweCcsXHJcbiAgICAgICAgICAgICAgICBtaW5XaWR0aDogJzhweCcsXHJcbiAgICAgICAgICAgICAgICBtaW5IZWlnaHQ6ICc4cHgnLFxyXG4gICAgICAgICAgICAgICAgbWFyZ2luUmlnaHQ6ICcxMHB4JyxcclxuICAgICAgICAgICAgfSB9KSksXHJcbiAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChCb3gsIHsgc3g6IHsgZGlzcGxheTogJ2ZsZXgnLCBmbGV4RGlyZWN0aW9uOiAnY29sdW1uJywgd2lkdGg6ICcxMDAlJyB9IH0sXHJcbiAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoQm94LCB7IHN4OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogJ2ZsZXgnLFxyXG4gICAgICAgICAgICAgICAgICAgIGZsZXhEaXJlY3Rpb246ICdyb3cnLFxyXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiAnMTAwJScsXHJcbiAgICAgICAgICAgICAgICAgICAganVzdGlmeUNvbnRlbnQ6ICdzcGFjZS1iZXR3ZWVuJyxcclxuICAgICAgICAgICAgICAgIH0gfSxcclxuICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoVHlwb2dyYXBoeSwgeyBzeDogeyBmb250V2VpZ2h0OiAnNTAwJywgY29sb3I6IGlzRGFya01vZGUgPyAnI2ZmZicgOiAnIzAwMCcgfSB9LCBtYWlsLnNlbmRlciksXHJcbiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KEJveCwgeyBzeDogeyBkaXNwbGF5OiAnZmxleCcsIGZsZXhEaXJlY3Rpb246ICdjb2x1bW4nIH0gfSxcclxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFR5cG9ncmFwaHksIHsgc3g6IHsgY29sb3I6ICcjZGVkZWRlJywgZm9udFNpemU6ICcxM3B4JyB9IH0sIG1haWxEYXRlKG1haWwuZGF0ZSkpKSksXHJcbiAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoVHlwb2dyYXBoeSwgeyBzeDogeyBjb2xvcjogaXNEYXJrTW9kZSA/ICcjZmZmJyA6ICcjMDAwJyB9IH0sIG1haWwuc3ViamVjdCkpKSk7IH0pKSk7XHJcbn07XHJcbmV4cG9ydCBkZWZhdWx0IE1haWxMaXN0O1xyXG4iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyB1c2VNb2RhbFZpc2libGUsIHVzZVNlbGVjdGVkTWFpbCB9IGZyb20gJy4uL2F0b21zL21haWwtYXRvbXMnO1xyXG5pbXBvcnQgeyBCdXR0b24sIFNsaWRlLCBQYXBlciwgVHlwb2dyYXBoeSwgQ29udGFpbmVyLCBCb3gsIERpdmlkZXIgfSBmcm9tICdAbXVpL21hdGVyaWFsJztcclxuaW1wb3J0IEFycm93QmFja0ljb24gZnJvbSAnQG11aS9pY29ucy1tYXRlcmlhbC9BcnJvd0JhY2snO1xyXG5pbXBvcnQgeyBkYXRlU3RyaW5nIH0gZnJvbSAnLi4vdXRpbHMvbWlzYyc7XHJcbmltcG9ydCB7IHVzZU1haWxBUEkgfSBmcm9tICcuLi9ob29rcy91c2VNYWlsQVBJJztcclxuaW1wb3J0IHhzcyBmcm9tICd4c3MnO1xyXG52YXIgTWFpbE1vZGFsID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIF9hID0gdXNlTW9kYWxWaXNpYmxlKCksIG1vZGFsVmlzaWJsZSA9IF9hWzBdLCBzZXRNb2RhbFZpc2libGUgPSBfYVsxXTtcclxuICAgIHZhciBfYiA9IHVzZVNlbGVjdGVkTWFpbCgpLCBzZWxlY3RlZE1haWwgPSBfYlswXSwgc2V0c2VsZWN0ZWRNYWlsID0gX2JbMV07XHJcbiAgICB2YXIgX2MgPSB1c2VNYWlsQVBJKCksIGRlbGV0ZU1haWwgPSBfYy5kZWxldGVNYWlsLCB1cGRhdGVNYWlsQnV0dG9uID0gX2MudXBkYXRlTWFpbEJ1dHRvbjtcclxuICAgIGlmIChzZWxlY3RlZE1haWwgPT09IG51bGwpXHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB2YXIgaGFuZGxlRGVsZXRlTWFpbCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBkZWxldGVNYWlsKHNlbGVjdGVkTWFpbC5tYWlsaWQpXHJcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgc2V0TW9kYWxWaXNpYmxlKGZhbHNlKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAuY2F0Y2goY29uc29sZS5lcnJvcik7XHJcbiAgICB9O1xyXG4gICAgdmFyIGhhbmRsZVN1Ym1pdEJ1dHRvbiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB1cGRhdGVNYWlsQnV0dG9uKHsgbWFpbGlkOiBzZWxlY3RlZE1haWwubWFpbGlkLCBidXR0b246IHNlbGVjdGVkTWFpbC5idXR0b24gfSlcclxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBzZXRNb2RhbFZpc2libGUoZmFsc2UpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5jYXRjaChjb25zb2xlLmVycm9yKTtcclxuICAgIH07XHJcbiAgICB2YXIgX2hhbmRsZUNsb3NlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNldE1vZGFsVmlzaWJsZShmYWxzZSk7XHJcbiAgICB9O1xyXG4gICAgdmFyIGhhbmRsZUNsZWFyQ29udGVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzZXRzZWxlY3RlZE1haWwobnVsbCk7XHJcbiAgICB9O1xyXG4gICAgdmFyIHNhbml0aXplZE1lc3NhZ2UgPSB4c3Moc2VsZWN0ZWRNYWlsLm1lc3NhZ2UsIHtcclxuICAgICAgICB3aGl0ZUxpc3Q6IHtcclxuICAgICAgICAgICAgYnI6IFtdLFxyXG4gICAgICAgICAgICBzdHJvbmc6IFtdLFxyXG4gICAgICAgIH0sXHJcbiAgICB9KTtcclxuICAgIHJldHVybiAoUmVhY3QuY3JlYXRlRWxlbWVudChTbGlkZSwgeyBkaXJlY3Rpb246IFwibGVmdFwiLCBpbjogbW9kYWxWaXNpYmxlLCBtb3VudE9uRW50ZXI6IHRydWUsIHVubW91bnRPbkV4aXQ6IHRydWUsIG9uRXhpdGVkOiBoYW5kbGVDbGVhckNvbnRlbnQgfSxcclxuICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFBhcGVyLCB7IHN4OiB7XHJcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcclxuICAgICAgICAgICAgICAgIHpJbmRleDogMjAsXHJcbiAgICAgICAgICAgICAgICBoZWlnaHQ6ICcxMDAlJyxcclxuICAgICAgICAgICAgICAgIHdpZHRoOiAnMTAwJScsXHJcbiAgICAgICAgICAgIH0sIHNxdWFyZTogdHJ1ZSB9LFxyXG4gICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KENvbnRhaW5lciwgeyBzeDogeyBoZWlnaHQ6ICcxMDAlJyB9IH0sXHJcbiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KEJveCwgeyBzeDogeyBoZWlnaHQ6ICcxMDAlJyB9IH0sXHJcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChCb3gsIHsgcHQ6IDIsIHBiOiAxIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoQnV0dG9uLCB7IGNvbG9yOiBcInNlY29uZGFyeVwiLCBzaXplOiBcImxhcmdlXCIsIHN0YXJ0SWNvbjogUmVhY3QuY3JlYXRlRWxlbWVudChBcnJvd0JhY2tJY29uLCB7IGZvbnRTaXplOiBcImxhcmdlXCIgfSksIG9uQ2xpY2s6IF9oYW5kbGVDbG9zZSB9LCBcIklOQk9YXCIpKSxcclxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KEJveCwgeyBwbDogMSwgcGI6ICcxMnB4JyB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFR5cG9ncmFwaHksIHsgc3g6IHsgZm9udFNpemU6ICcyMHB4JywgZm9udFdlaWdodDogNTAwIH0gfSwgc2VsZWN0ZWRNYWlsLnNlbmRlciksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoVHlwb2dyYXBoeSwgeyBzeDogeyBmb250U2l6ZTogJzE5cHgnIH0gfSwgc2VsZWN0ZWRNYWlsLnN1YmplY3QpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZE1haWwuZGF0ZSAmJiAoUmVhY3QuY3JlYXRlRWxlbWVudChUeXBvZ3JhcGh5LCB7IHN4OiB7IGZvbnRTaXplOiAnMTVweCcsIGNvbG9yOiAnI2RlZGVkZScgfSB9LCBkYXRlU3RyaW5nKHNlbGVjdGVkTWFpbC5kYXRlKSkpKSxcclxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KERpdmlkZXIsIG51bGwpLFxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkTWFpbC5tZXNzYWdlICYmIChSZWFjdC5jcmVhdGVFbGVtZW50KEJveCwgeyBwbDogMSwgcHQ6ICcxMnB4Jywgc3g6IHsgZm9udFNpemU6ICcxOHB4JywgaGVpZ2h0OiAnNzAlJyB9LCBkYW5nZXJvdXNseVNldElubmVySFRNTDogeyBfX2h0bWw6IHNhbml0aXplZE1lc3NhZ2UgfSB9KSksXHJcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChCb3gsIHsgZGlzcGxheTogXCJpbmxpbmVcIiwgcDogMSwgc3g6IHsgZGlzcGxheTogJ2ZsZXgnLCBnYXA6ICcxNXB4JywganVzdGlmeUNvbnRlbnQ6ICdjZW50ZXInIH0gfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRNYWlsLmJ1dHRvbiAhPT0gdW5kZWZpbmVkICYmIHNlbGVjdGVkTWFpbC5idXR0b24gIT09IG51bGwgJiYgKFJlYWN0LmNyZWF0ZUVsZW1lbnQoQnV0dG9uLCB7IGNvbG9yOiBcInN1Y2Nlc3NcIiwgdmFyaWFudDogXCJjb250YWluZWRcIiwgb25DbGljazogaGFuZGxlU3VibWl0QnV0dG9uIH0sIFwiQUNDRVBUXCIpKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChCdXR0b24sIHsgY29sb3I6IFwiZXJyb3JcIiwgdmFyaWFudDogXCJjb250YWluZWRcIiwgb25DbGljazogaGFuZGxlRGVsZXRlTWFpbCB9LCBcIkRFTEVURVwiKSkpKSkpKTtcclxufTtcclxuZXhwb3J0IGRlZmF1bHQgTWFpbE1vZGFsO1xyXG4iLCJ2YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcclxuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxyXG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XHJcbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xyXG4gICAgfSk7XHJcbn07XHJcbnZhciBfX2dlbmVyYXRvciA9ICh0aGlzICYmIHRoaXMuX19nZW5lcmF0b3IpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBib2R5KSB7XHJcbiAgICB2YXIgXyA9IHsgbGFiZWw6IDAsIHNlbnQ6IGZ1bmN0aW9uKCkgeyBpZiAodFswXSAmIDEpIHRocm93IHRbMV07IHJldHVybiB0WzFdOyB9LCB0cnlzOiBbXSwgb3BzOiBbXSB9LCBmLCB5LCB0LCBnO1xyXG4gICAgcmV0dXJuIGcgPSB7IG5leHQ6IHZlcmIoMCksIFwidGhyb3dcIjogdmVyYigxKSwgXCJyZXR1cm5cIjogdmVyYigyKSB9LCB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgKGdbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSksIGc7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgcmV0dXJuIGZ1bmN0aW9uICh2KSB7IHJldHVybiBzdGVwKFtuLCB2XSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHN0ZXAob3ApIHtcclxuICAgICAgICBpZiAoZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy5cIik7XHJcbiAgICAgICAgd2hpbGUgKF8pIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChmID0gMSwgeSAmJiAodCA9IG9wWzBdICYgMiA/IHlbXCJyZXR1cm5cIl0gOiBvcFswXSA/IHlbXCJ0aHJvd1wiXSB8fCAoKHQgPSB5W1wicmV0dXJuXCJdKSAmJiB0LmNhbGwoeSksIDApIDogeS5uZXh0KSAmJiAhKHQgPSB0LmNhbGwoeSwgb3BbMV0pKS5kb25lKSByZXR1cm4gdDtcclxuICAgICAgICAgICAgaWYgKHkgPSAwLCB0KSBvcCA9IFtvcFswXSAmIDIsIHQudmFsdWVdO1xyXG4gICAgICAgICAgICBzd2l0Y2ggKG9wWzBdKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6IGNhc2UgMTogdCA9IG9wOyBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgNDogXy5sYWJlbCsrOyByZXR1cm4geyB2YWx1ZTogb3BbMV0sIGRvbmU6IGZhbHNlIH07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDU6IF8ubGFiZWwrKzsgeSA9IG9wWzFdOyBvcCA9IFswXTsgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDc6IG9wID0gXy5vcHMucG9wKCk7IF8udHJ5cy5wb3AoKTsgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghKHQgPSBfLnRyeXMsIHQgPSB0Lmxlbmd0aCA+IDAgJiYgdFt0Lmxlbmd0aCAtIDFdKSAmJiAob3BbMF0gPT09IDYgfHwgb3BbMF0gPT09IDIpKSB7IF8gPSAwOyBjb250aW51ZTsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gMyAmJiAoIXQgfHwgKG9wWzFdID4gdFswXSAmJiBvcFsxXSA8IHRbM10pKSkgeyBfLmxhYmVsID0gb3BbMV07IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSA2ICYmIF8ubGFiZWwgPCB0WzFdKSB7IF8ubGFiZWwgPSB0WzFdOyB0ID0gb3A7IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHQgJiYgXy5sYWJlbCA8IHRbMl0pIHsgXy5sYWJlbCA9IHRbMl07IF8ub3BzLnB1c2gob3ApOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0WzJdKSBfLm9wcy5wb3AoKTtcclxuICAgICAgICAgICAgICAgICAgICBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG9wID0gYm9keS5jYWxsKHRoaXNBcmcsIF8pO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHsgb3AgPSBbNiwgZV07IHkgPSAwOyB9IGZpbmFsbHkgeyBmID0gdCA9IDA7IH1cclxuICAgICAgICBpZiAob3BbMF0gJiA1KSB0aHJvdyBvcFsxXTsgcmV0dXJuIHsgdmFsdWU6IG9wWzBdID8gb3BbMV0gOiB2b2lkIDAsIGRvbmU6IHRydWUgfTtcclxuICAgIH1cclxufTtcclxuaW1wb3J0IHsgdXNlQ2FsbGJhY2sgfSBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IHVzZVNuYWNrYmFyIH0gZnJvbSAnLi4vc25hY2tiYXIvdXNlU25hY2tiYXInO1xyXG5pbXBvcnQgeyB1c2VNYWlsQWN0aW9ucyB9IGZyb20gJy4vdXNlTWFpbEFjdGlvbnMnO1xyXG5pbXBvcnQgZmV0Y2hOdWkgZnJvbSAnLi4vdXRpbHMvZmV0Y2hOdWknO1xyXG5leHBvcnQgdmFyIHVzZU1haWxBUEkgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgYWRkQWxlcnQgPSB1c2VTbmFja2JhcigpLmFkZEFsZXJ0O1xyXG4gICAgdmFyIF9hID0gdXNlTWFpbEFjdGlvbnMoKSwgdXBkYXRlUmVhZFN0YXRlID0gX2EudXBkYXRlUmVhZFN0YXRlLCBkZWxldGVMb2NhbE1haWwgPSBfYS5kZWxldGVMb2NhbE1haWwsIHVwZGF0ZUxvY2FsQnV0dG9uID0gX2EudXBkYXRlTG9jYWxCdXR0b247XHJcbiAgICB2YXIgdXBkYXRlUmVhZCA9IHVzZUNhbGxiYWNrKGZ1bmN0aW9uIChtYWlsaWQpIHsgcmV0dXJuIF9fYXdhaXRlcih2b2lkIDAsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6IHJldHVybiBbNCAvKnlpZWxkKi8sIGZldGNoTnVpKFwibnB3ZDpxYi1tYWlsOnVwZGF0ZVJlYWRcIiwgbWFpbGlkKV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZVJlYWRTdGF0ZShtYWlsaWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7IH0sIFt1cGRhdGVSZWFkU3RhdGVdKTtcclxuICAgIHZhciBkZWxldGVNYWlsID0gdXNlQ2FsbGJhY2soZnVuY3Rpb24gKG1haWxpZCkgeyByZXR1cm4gX19hd2FpdGVyKHZvaWQgMCwgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgcmVzcDtcclxuICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMDogcmV0dXJuIFs0IC8qeWllbGQqLywgZmV0Y2hOdWkoXCJucHdkOnFiLW1haWw6ZGVsZXRlTWFpbFwiLCBtYWlsaWQpXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICByZXNwID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXNwLnN0YXR1cyAhPT0gJ29rJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgYWRkQWxlcnQoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdGYWlsZWQgdG8gZGVsZXRlIG1haWwnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdlcnJvcicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KV07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZUxvY2FsTWFpbChtYWlsaWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGFkZEFsZXJ0KHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ1N1Y2Nlc3NmdWxseSBkZWxldGVkIG1haWwnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTsgfSwgW2FkZEFsZXJ0LCBkZWxldGVMb2NhbE1haWxdKTtcclxuICAgIHZhciB1cGRhdGVNYWlsQnV0dG9uID0gdXNlQ2FsbGJhY2soZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgdmFyIG1haWxpZCA9IF9hLm1haWxpZCwgYnV0dG9uID0gX2EuYnV0dG9uO1xyXG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodm9pZCAwLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgcmVzcDtcclxuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYikge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYi5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDogcmV0dXJuIFs0IC8qeWllbGQqLywgZmV0Y2hOdWkoXCJucHdkOnFiLW1haWw6dXBkYXRlQnV0dG9uXCIsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1haWxpZDogbWFpbGlkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uOiBidXR0b24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3AgPSBfYi5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXNwLnN0YXR1cyAhPT0gJ29rJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIGFkZEFsZXJ0KHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ0ZhaWxlZCB0byBhY2NlcHQgbWFpbCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdlcnJvcicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZUxvY2FsQnV0dG9uKG1haWxpZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZEFsZXJ0KHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdTdWNjZXNzZnVsbHkgYWNjZXB0ZWQgbWFpbCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSwgW2FkZEFsZXJ0LCB1cGRhdGVMb2NhbEJ1dHRvbl0pO1xyXG4gICAgcmV0dXJuIHsgdXBkYXRlUmVhZDogdXBkYXRlUmVhZCwgZGVsZXRlTWFpbDogZGVsZXRlTWFpbCwgdXBkYXRlTWFpbEJ1dHRvbjogdXBkYXRlTWFpbEJ1dHRvbiB9O1xyXG59O1xyXG4iLCJ2YXIgX19hc3NpZ24gPSAodGhpcyAmJiB0aGlzLl9fYXNzaWduKSB8fCBmdW5jdGlvbiAoKSB7XHJcbiAgICBfX2Fzc2lnbiA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24odCkge1xyXG4gICAgICAgIGZvciAodmFyIHMsIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xyXG4gICAgICAgICAgICBzID0gYXJndW1lbnRzW2ldO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkpXHJcbiAgICAgICAgICAgICAgICB0W3BdID0gc1twXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHQ7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIF9fYXNzaWduLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcbn07XHJcbnZhciBfX3NwcmVhZEFycmF5ID0gKHRoaXMgJiYgdGhpcy5fX3NwcmVhZEFycmF5KSB8fCBmdW5jdGlvbiAodG8sIGZyb20sIHBhY2spIHtcclxuICAgIGlmIChwYWNrIHx8IGFyZ3VtZW50cy5sZW5ndGggPT09IDIpIGZvciAodmFyIGkgPSAwLCBsID0gZnJvbS5sZW5ndGgsIGFyOyBpIDwgbDsgaSsrKSB7XHJcbiAgICAgICAgaWYgKGFyIHx8ICEoaSBpbiBmcm9tKSkge1xyXG4gICAgICAgICAgICBpZiAoIWFyKSBhciA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGZyb20sIDAsIGkpO1xyXG4gICAgICAgICAgICBhcltpXSA9IGZyb21baV07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRvLmNvbmNhdChhciB8fCBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChmcm9tKSk7XHJcbn07XHJcbmltcG9ydCB7IHVzZVNldE1haWwgfSBmcm9tICcuLi9hdG9tcy9tYWlsLWF0b21zJztcclxuaW1wb3J0IHsgdXNlQ2FsbGJhY2sgfSBmcm9tICdyZWFjdCc7XHJcbmV4cG9ydCB2YXIgdXNlTWFpbEFjdGlvbnMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2V0TWFpbCA9IHVzZVNldE1haWwoKTtcclxuICAgIHZhciB1cGRhdGVSZWFkU3RhdGUgPSB1c2VDYWxsYmFjayhmdW5jdGlvbiAoaWQpIHtcclxuICAgICAgICBzZXRNYWlsKGZ1bmN0aW9uIChjdXJNYWlsKSB7XHJcbiAgICAgICAgICAgIHZhciBuZXdNYWlsID0gY3VyTWFpbC5tYXAoZnVuY3Rpb24gKG1haWwpIHtcclxuICAgICAgICAgICAgICAgIGlmIChtYWlsLm1haWxpZCA9PT0gaWQpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gX19hc3NpZ24oX19hc3NpZ24oe30sIG1haWwpLCB7IHJlYWQ6IDEgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbWFpbDtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXdNYWlsO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSwgW3NldE1haWxdKTtcclxuICAgIHZhciBuZXdNYWlsID0gdXNlQ2FsbGJhY2soZnVuY3Rpb24gKG1haWwpIHtcclxuICAgICAgICBzZXRNYWlsKGZ1bmN0aW9uIChjdXJNYWlsKSB7XHJcbiAgICAgICAgICAgIHZhciBuZXdNYWlsID0gX19zcHJlYWRBcnJheShbbWFpbF0sIGN1ck1haWwsIHRydWUpO1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3TWFpbDtcclxuICAgICAgICB9KTtcclxuICAgIH0sIFtzZXRNYWlsXSk7XHJcbiAgICB2YXIgdXBkYXRlTG9jYWxCdXR0b24gPSB1c2VDYWxsYmFjayhmdW5jdGlvbiAoaWQpIHtcclxuICAgICAgICBzZXRNYWlsKGZ1bmN0aW9uIChjdXJNYWlsKSB7XHJcbiAgICAgICAgICAgIHZhciB0YXJnZXRJbmRleCA9IGN1ck1haWwuZmluZEluZGV4KGZ1bmN0aW9uIChzdG9yZWRNYWlsKSB7IHJldHVybiBzdG9yZWRNYWlsLm1haWxpZCA9PT0gaWQ7IH0pO1xyXG4gICAgICAgICAgICB2YXIgbmV3TWFpbEFycmF5ID0gX19zcHJlYWRBcnJheShbXSwgY3VyTWFpbCwgdHJ1ZSk7XHJcbiAgICAgICAgICAgIG5ld01haWxBcnJheVt0YXJnZXRJbmRleF0uYnV0dG9uID0gbnVsbDtcclxuICAgICAgICAgICAgcmV0dXJuIG5ld01haWxBcnJheTtcclxuICAgICAgICB9KTtcclxuICAgIH0sIFtzZXRNYWlsXSk7XHJcbiAgICB2YXIgZGVsZXRlTG9jYWxNYWlsID0gdXNlQ2FsbGJhY2soZnVuY3Rpb24gKGlkKSB7XHJcbiAgICAgICAgc2V0TWFpbChmdW5jdGlvbiAoY3VyTWFpbCkgeyByZXR1cm4gX19zcHJlYWRBcnJheShbXSwgY3VyTWFpbCwgdHJ1ZSkuZmlsdGVyKGZ1bmN0aW9uIChtYWlsKSB7IHJldHVybiBtYWlsLm1haWxpZCAhPT0gaWQ7IH0pOyB9KTtcclxuICAgIH0sIFtzZXRNYWlsXSk7XHJcbiAgICByZXR1cm4geyB1cGRhdGVSZWFkU3RhdGU6IHVwZGF0ZVJlYWRTdGF0ZSwgZGVsZXRlTG9jYWxNYWlsOiBkZWxldGVMb2NhbE1haWwsIHVwZGF0ZUxvY2FsQnV0dG9uOiB1cGRhdGVMb2NhbEJ1dHRvbiwgbmV3TWFpbDogbmV3TWFpbCB9O1xyXG59O1xyXG4iLCJ2YXIgX19hc3NpZ24gPSAodGhpcyAmJiB0aGlzLl9fYXNzaWduKSB8fCBmdW5jdGlvbiAoKSB7XHJcbiAgICBfX2Fzc2lnbiA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24odCkge1xyXG4gICAgICAgIGZvciAodmFyIHMsIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xyXG4gICAgICAgICAgICBzID0gYXJndW1lbnRzW2ldO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkpXHJcbiAgICAgICAgICAgICAgICB0W3BdID0gc1twXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHQ7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIF9fYXNzaWduLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcbn07XHJcbmltcG9ydCBSZWFjdCwgeyBmb3J3YXJkUmVmIH0gZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgTXVpQWxlcnQgZnJvbSAnQG11aS9tYXRlcmlhbC9BbGVydCc7XHJcbmltcG9ydCB7IFR5cG9ncmFwaHkgfSBmcm9tICdAbXVpL21hdGVyaWFsJztcclxuZXhwb3J0IHZhciBBbGVydCA9IGZvcndhcmRSZWYoZnVuY3Rpb24gKHByb3BzLCByZWYpIHtcclxuICAgIHJldHVybiAoUmVhY3QuY3JlYXRlRWxlbWVudChNdWlBbGVydCwgX19hc3NpZ24oeyBzeDoge1xyXG4gICAgICAgICAgICB6SW5kZXg6IDEwMDAwLFxyXG4gICAgICAgIH0sIGVsZXZhdGlvbjogNCwgdmFyaWFudDogXCJmaWxsZWRcIiB9LCBwcm9wcywgeyByZWY6IHJlZiB9KSxcclxuICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFR5cG9ncmFwaHksIHsgc3g6IHtcclxuICAgICAgICAgICAgICAgIG1heFdpZHRoOiAnMzAwcHgnLFxyXG4gICAgICAgICAgICAgICAgd29yZFdyYXA6ICdicmVhay13b3JkJyxcclxuICAgICAgICAgICAgICAgIGZvbnRTaXplOiAnMS4xZW0nLFxyXG4gICAgICAgICAgICB9IH0sIHByb3BzLmNoaWxkcmVuKSkpO1xyXG59KTtcclxuZXhwb3J0IGRlZmF1bHQgQWxlcnQ7XHJcbiIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IFNuYWNrYmFyIH0gZnJvbSAnQG11aS9tYXRlcmlhbCc7XHJcbmltcG9ydCB7IHVzZVNuYWNrYmFyIH0gZnJvbSAnLi91c2VTbmFja2Jhcic7XHJcbmltcG9ydCBBbGVydCBmcm9tICcuL0FsZXJ0JztcclxuZXhwb3J0IHZhciBQaG9uZVNuYWNrYmFyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIF9hO1xyXG4gICAgdmFyIF9iID0gdXNlU25hY2tiYXIoKSwgYWxlcnQgPSBfYi5hbGVydCwgaXNPcGVuID0gX2IuaXNPcGVuLCBoYW5kbGVDbG9zZSA9IF9iLmhhbmRsZUNsb3NlO1xyXG4gICAgcmV0dXJuIChSZWFjdC5jcmVhdGVFbGVtZW50KFNuYWNrYmFyLCB7IGF1dG9IaWRlRHVyYXRpb246IChfYSA9IGFsZXJ0ID09PSBudWxsIHx8IGFsZXJ0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBhbGVydC5kdXJhdGlvbikgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogMzAwMCwgb3BlbjogaXNPcGVuLCBzeDoge1xyXG4gICAgICAgICAgICBkaXNwbGF5OiAnZmxleCcsXHJcbiAgICAgICAgICAgIGp1c3RpZnlDb250ZW50OiAnY2VudGVyJyxcclxuICAgICAgICAgICAgYWxpZ25JdGVtczogJ2NlbnRlcicsXHJcbiAgICAgICAgICAgIGhlaWdodDogJ2F1dG8nLFxyXG4gICAgICAgICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcclxuICAgICAgICAgICAgYm90dG9tOiA3NSxcclxuICAgICAgICAgICAgbGVmdDogJzAgIWltcG9ydGFudCcsXHJcbiAgICAgICAgICAgIHJpZ2h0OiAnMCAhaW1wb3J0YW50JyxcclxuICAgICAgICB9LCBvbkNsb3NlOiBoYW5kbGVDbG9zZSB9LFxyXG4gICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoQWxlcnQsIHsgc2V2ZXJpdHk6IChhbGVydCA9PT0gbnVsbCB8fCBhbGVydCA9PT0gdm9pZCAwID8gdm9pZCAwIDogYWxlcnQudHlwZSkgfHwgJ2luZm8nLCBvbkNsb3NlOiBoYW5kbGVDbG9zZSB9LCAoYWxlcnQgPT09IG51bGwgfHwgYWxlcnQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGFsZXJ0Lm1lc3NhZ2UpIHx8ICcnKSkpO1xyXG59O1xyXG4iLCJpbXBvcnQgUmVhY3QsIHsgY3JlYXRlQ29udGV4dCwgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XHJcbmV4cG9ydCB2YXIgU25hY2tiYXJDb250ZXh0ID0gY3JlYXRlQ29udGV4dChudWxsKTtcclxudmFyIFNuYWNrYmFyUHJvdmlkZXIgPSBmdW5jdGlvbiAoX2EpIHtcclxuICAgIHZhciBjaGlsZHJlbiA9IF9hLmNoaWxkcmVuO1xyXG4gICAgdmFyIF9iID0gdXNlU3RhdGUoZmFsc2UpLCBvcGVuID0gX2JbMF0sIHNldE9wZW4gPSBfYlsxXTtcclxuICAgIHZhciBfYyA9IHVzZVN0YXRlKG51bGwpLCBhbGVydCA9IF9jWzBdLCBzZXRBbGVydCA9IF9jWzFdO1xyXG4gICAgdmFyIHNldE5ld0FsZXJ0ID0gZnVuY3Rpb24gKGFsZXJ0KSB7XHJcbiAgICAgICAgc2V0QWxlcnQoYWxlcnQpO1xyXG4gICAgICAgIHNldE9wZW4odHJ1ZSk7XHJcbiAgICB9O1xyXG4gICAgdmFyIGhhbmRsZUNsb3NlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNldE9wZW4oZmFsc2UpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiAoUmVhY3QuY3JlYXRlRWxlbWVudChTbmFja2JhckNvbnRleHQuUHJvdmlkZXIsIHsgdmFsdWU6IHsgYWxlcnQ6IGFsZXJ0LCBhZGRBbGVydDogc2V0TmV3QWxlcnQsIGhhbmRsZUNsb3NlOiBoYW5kbGVDbG9zZSwgaXNPcGVuOiBvcGVuIH0gfSwgY2hpbGRyZW4pKTtcclxufTtcclxuZXhwb3J0IGRlZmF1bHQgU25hY2tiYXJQcm92aWRlcjtcclxuIiwiaW1wb3J0IHsgdXNlQ29udGV4dCB9IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgU25hY2tiYXJDb250ZXh0IH0gZnJvbSAnLi9TbmFja2JhclByb3ZpZGVyJztcclxuZXhwb3J0IHZhciB1c2VTbmFja2JhciA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHVzZUNvbnRleHQoU25hY2tiYXJDb250ZXh0KTsgfTtcclxuIiwidmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XHJcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cclxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxyXG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcclxuICAgIH0pO1xyXG59O1xyXG52YXIgX19nZW5lcmF0b3IgPSAodGhpcyAmJiB0aGlzLl9fZ2VuZXJhdG9yKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgYm9keSkge1xyXG4gICAgdmFyIF8gPSB7IGxhYmVsOiAwLCBzZW50OiBmdW5jdGlvbigpIHsgaWYgKHRbMF0gJiAxKSB0aHJvdyB0WzFdOyByZXR1cm4gdFsxXTsgfSwgdHJ5czogW10sIG9wczogW10gfSwgZiwgeSwgdCwgZztcclxuICAgIHJldHVybiBnID0geyBuZXh0OiB2ZXJiKDApLCBcInRocm93XCI6IHZlcmIoMSksIFwicmV0dXJuXCI6IHZlcmIoMikgfSwgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIChnW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0pLCBnO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IHJldHVybiBmdW5jdGlvbiAodikgeyByZXR1cm4gc3RlcChbbiwgdl0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiBzdGVwKG9wKSB7XHJcbiAgICAgICAgaWYgKGYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBleGVjdXRpbmcuXCIpO1xyXG4gICAgICAgIHdoaWxlIChfKSB0cnkge1xyXG4gICAgICAgICAgICBpZiAoZiA9IDEsIHkgJiYgKHQgPSBvcFswXSAmIDIgPyB5W1wicmV0dXJuXCJdIDogb3BbMF0gPyB5W1widGhyb3dcIl0gfHwgKCh0ID0geVtcInJldHVyblwiXSkgJiYgdC5jYWxsKHkpLCAwKSA6IHkubmV4dCkgJiYgISh0ID0gdC5jYWxsKHksIG9wWzFdKSkuZG9uZSkgcmV0dXJuIHQ7XHJcbiAgICAgICAgICAgIGlmICh5ID0gMCwgdCkgb3AgPSBbb3BbMF0gJiAyLCB0LnZhbHVlXTtcclxuICAgICAgICAgICAgc3dpdGNoIChvcFswXSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOiBjYXNlIDE6IHQgPSBvcDsgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDQ6IF8ubGFiZWwrKzsgcmV0dXJuIHsgdmFsdWU6IG9wWzFdLCBkb25lOiBmYWxzZSB9O1xyXG4gICAgICAgICAgICAgICAgY2FzZSA1OiBfLmxhYmVsKys7IHkgPSBvcFsxXTsgb3AgPSBbMF07IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA3OiBvcCA9IF8ub3BzLnBvcCgpOyBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICBpZiAoISh0ID0gXy50cnlzLCB0ID0gdC5sZW5ndGggPiAwICYmIHRbdC5sZW5ndGggLSAxXSkgJiYgKG9wWzBdID09PSA2IHx8IG9wWzBdID09PSAyKSkgeyBfID0gMDsgY29udGludWU7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDMgJiYgKCF0IHx8IChvcFsxXSA+IHRbMF0gJiYgb3BbMV0gPCB0WzNdKSkpIHsgXy5sYWJlbCA9IG9wWzFdOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gNiAmJiBfLmxhYmVsIDwgdFsxXSkgeyBfLmxhYmVsID0gdFsxXTsgdCA9IG9wOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0ICYmIF8ubGFiZWwgPCB0WzJdKSB7IF8ubGFiZWwgPSB0WzJdOyBfLm9wcy5wdXNoKG9wKTsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodFsyXSkgXy5vcHMucG9wKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBvcCA9IGJvZHkuY2FsbCh0aGlzQXJnLCBfKTtcclxuICAgICAgICB9IGNhdGNoIChlKSB7IG9wID0gWzYsIGVdOyB5ID0gMDsgfSBmaW5hbGx5IHsgZiA9IHQgPSAwOyB9XHJcbiAgICAgICAgaWYgKG9wWzBdICYgNSkgdGhyb3cgb3BbMV07IHJldHVybiB7IHZhbHVlOiBvcFswXSA/IG9wWzFdIDogdm9pZCAwLCBkb25lOiB0cnVlIH07XHJcbiAgICB9XHJcbn07XHJcbi8qKlxyXG4gKiBTaW1wbGUgd3JhcHBlciBhcm91bmQgZmV0Y2ggQVBJIHRhaWxvcmVkIGZvciBDRUYvTlVJIHVzZS5cclxuICogQHBhcmFtIGV2ZW50TmFtZSAtIFRoZSBlbmRwb2ludCBldmVudG5hbWUgdG8gdGFyZ2V0XHJcbiAqIEBwYXJhbSBkYXRhIC0gRGF0YSB5b3Ugd2lzaCB0byBzZW5kIGluIHRoZSBOVUkgQ2FsbGJhY2tcclxuICpcclxuICogQHJldHVybiByZXR1cm5EYXRhIC0gQSBwcm9taXNlIGZvciB0aGUgZGF0YSBzZW50IGJhY2sgYnkgdGhlIE51aUNhbGxiYWNrcyBDQiBhcmd1bWVudFxyXG4gKi9cclxuaW1wb3J0IHsgaXNFbnZCcm93c2VyIH0gZnJvbSAnLi9taXNjJztcclxuZnVuY3Rpb24gZmV0Y2hOdWkoZXZlbnROYW1lLCBkYXRhLCBtb2NrUmVzcCkge1xyXG4gICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBvcHRpb25zLCByZXNvdXJjZU5hbWUsIHJlc3AsIHJlc3BvbnNlT2JqO1xyXG4gICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ3Bvc3QnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9VVRGLTgnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhKSxcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpc0VudkJyb3dzZXIoKSAmJiBtb2NrUmVzcCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgbW9ja1Jlc3BdO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXNvdXJjZU5hbWUgPSBcIm5wd2RfcWJfbWFpbFwiO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGZldGNoKFwiaHR0cHM6Ly9cIi5jb25jYXQocmVzb3VyY2VOYW1lLCBcIi9cIikuY29uY2F0KGV2ZW50TmFtZSksIG9wdGlvbnMpXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICByZXNwID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHJlc3AuanNvbigpXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICByZXNwb25zZU9iaiA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgcmVzcG9uc2VPYmpdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxyXG5leHBvcnQgZGVmYXVsdCBmZXRjaE51aTtcclxuIiwiZXhwb3J0IHZhciBpc0VudkJyb3dzZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICByZXR1cm4gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcgJiYgIXdpbmRvdy5pbnZva2VOYXRpdmU7XHJcbn07XHJcbmV4cG9ydCB2YXIgZ2V0UmVzb3VyY2VOYW1lID0gZnVuY3Rpb24gKCkge1xyXG4gICAgcmV0dXJuIHdpbmRvdy5HZXRQYXJlbnRSZXNvdXJjZU5hbWUgPyB3aW5kb3cgPT09IG51bGwgfHwgd2luZG93ID09PSB2b2lkIDAgPyB2b2lkIDAgOiB3aW5kb3cuR2V0UGFyZW50UmVzb3VyY2VOYW1lKCkgOiAnbnB3ZCc7XHJcbn07XHJcbmV4cG9ydCB2YXIgYnVpbGRSZXNwT2JqID0gZnVuY3Rpb24gKGRhdGEsIHN0YXR1cywgZXJyb3JNc2cpIHsgcmV0dXJuICh7XHJcbiAgICBkYXRhOiBkYXRhLFxyXG4gICAgc3RhdHVzOiBzdGF0dXMsXHJcbiAgICBlcnJvck1zZzogZXJyb3JNc2csXHJcbn0pOyB9O1xyXG52YXIgRGF5Rm9ybWF0dGluZyA9IFtcclxuICAgICdTdW5kYXknLFxyXG4gICAgJ01vbmRheScsXHJcbiAgICAnVHVlc2RheScsXHJcbiAgICAnV2VkbmVzZGF5JyxcclxuICAgICdUaHVyc2RheScsXHJcbiAgICAnRnJpZGF5JyxcclxuICAgICdTYXR1cmRheScsXHJcbl07XHJcbnZhciBNb250aEZvcm1hdHRpbmcgPSBbXHJcbiAgICAnSmFudWFyeScsXHJcbiAgICAnRmVicnVhcnknLFxyXG4gICAgJ01hcmNoJyxcclxuICAgICdBcHJpbCcsXHJcbiAgICAnTWF5JyxcclxuICAgICdKdW5lJyxcclxuICAgICdKdWx5JyxcclxuICAgICdBdWd1c3QnLFxyXG4gICAgJ1NlcHRlbWJlcicsXHJcbiAgICAnT2N0b2JlcicsXHJcbiAgICAnTm92ZW1iZXInLFxyXG4gICAgJ0RlY2VtYmVyJyxcclxuXTtcclxuZXhwb3J0IHZhciBkYXRlU3RyaW5nID0gZnVuY3Rpb24gKG1haWxEYXRlKSB7XHJcbiAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKG1haWxEYXRlKTtcclxuICAgIHJldHVybiAoRGF5Rm9ybWF0dGluZ1tkYXRlLmdldERheSgpXSArXHJcbiAgICAgICAgJywgJyArXHJcbiAgICAgICAgTW9udGhGb3JtYXR0aW5nW2RhdGUuZ2V0TW9udGgoKV0gK1xyXG4gICAgICAgICcgJyArXHJcbiAgICAgICAgKCcwJyArIGRhdGUuZ2V0RGF0ZSgpKS5zbGljZSgtMikgK1xyXG4gICAgICAgICcgJyArXHJcbiAgICAgICAgZGF0ZS5nZXRGdWxsWWVhcigpICtcclxuICAgICAgICAnICcgK1xyXG4gICAgICAgIGRhdGUuZ2V0SG91cnMoKSArXHJcbiAgICAgICAgJzonICtcclxuICAgICAgICBkYXRlLmdldE1pbnV0ZXMoKSk7XHJcbn07XHJcbiJdLCJuYW1lcyI6WyJNb2NrTWFpbCIsIm1haWxpZCIsInNlbmRlciIsInN1YmplY3QiLCJtZXNzYWdlIiwicmVhZCIsImRhdGUiLCJidXR0b24iLCJidXR0b25FdmVudCIsImVuYWJsZWQiLCJidXR0b25EYXRhIiwiZGVhbGVyIiwiaXRlbURhdGEiLCJtaW5yZXAiLCJpdGVtIiwiYW1vdW50IiwibG9jYXRpb25MYWJlbCIsImNvb3JkcyIsIngiLCJ5IiwieiIsIm1haWxTdGF0ZXMiLCJtYWlsSXRlbXMiLCJhdG9tIiwia2V5IiwiZGVmYXVsdCIsInNlbGVjdG9yIiwiZ2V0IiwidGhpc0FyZyIsIl9hcmd1bWVudHMiLCJnZW5lcmF0b3IiLCJyZXNwIiwiZV8xIiwiYm9keSIsImYiLCJ0IiwiZyIsIl8iLCJsYWJlbCIsInNlbnQiLCJ0cnlzIiwib3BzIiwibmV4dCIsInZlcmIiLCJTeW1ib2wiLCJpdGVyYXRvciIsInRoaXMiLCJuIiwidiIsIm9wIiwiVHlwZUVycm9yIiwiY2FsbCIsImRvbmUiLCJ2YWx1ZSIsInBvcCIsImxlbmd0aCIsInB1c2giLCJlIiwic3RlcCIsIl9fZ2VuZXJhdG9yIiwiX2EiLCJmZXRjaE51aSIsImRhdGEiLCJjb25zb2xlIiwibG9nIiwiZXJyb3IiLCJQIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJmdWxmaWxsZWQiLCJyZWplY3RlZCIsInJlc3VsdCIsInRoZW4iLCJhcHBseSIsInNlbGVjdGVkTWFpbCIsIm1vZGFsVmlzaWJpbGUiLCJ1c2VNYWlsc1ZhbHVlIiwidXNlUmVjb2lsVmFsdWUiLCJ1c2VTZXRNYWlsIiwidXNlU2V0UmVjb2lsU3RhdGUiLCJ1c2VTZXRNb2RhbFZpc2libGUiLCJ1c2VNb2RhbFZpc2libGUiLCJ1c2VSZWNvaWxTdGF0ZSIsInVzZVNldFNlbGVjdGVkTWFpbCIsInVzZVNlbGVjdGVkTWFpbCIsInB4IiwicHQiLCJzeCIsIndpZHRoIiwidGV4dEFsaWduIiwiYmFja2dyb3VuZENvbG9yIiwiY29sb3IiLCJwYXJhZ3JhcGgiLCJ2YXJpYW50IiwiaXNEYXJrTW9kZSIsIm1haWxzIiwic2V0TWFpbCIsInNldE1vZGFsVmlzaWJsZSIsInVwZGF0ZVJlYWQiLCJuZXdNYWlsIiwidXNlTnVpRXZlbnQiLCJldmVudCIsInVzZUVmZmVjdCIsImRpc2FibGVQYWRkaW5nIiwibWFwIiwibWFpbCIsImRpdmlkZXIiLCJvbkNsaWNrIiwiaGFuZGxlTWFpbE1vZGFsIiwiYmdjb2xvciIsImJvcmRlclJhZGl1cyIsIm1pbldpZHRoIiwibWluSGVpZ2h0IiwibWFyZ2luUmlnaHQiLCJkaXNwbGF5IiwiZmxleERpcmVjdGlvbiIsImp1c3RpZnlDb250ZW50IiwiZm9udFdlaWdodCIsImZvbnRTaXplIiwiZGF0ZURhdGEiLCJEYXRlIiwiZ2V0RGF0ZSIsInNsaWNlIiwiZ2V0TW9udGgiLCJnZXRGdWxsWWVhciIsImFsaWduSXRlbXMiLCJoZWlnaHQiLCJzdHlsZSIsIm1vZGFsVmlzaWJsZSIsIl9iIiwic2V0c2VsZWN0ZWRNYWlsIiwiX2MiLCJkZWxldGVNYWlsIiwidXBkYXRlTWFpbEJ1dHRvbiIsInNhbml0aXplZE1lc3NhZ2UiLCJ3aGl0ZUxpc3QiLCJiciIsInN0cm9uZyIsImRpcmVjdGlvbiIsImluIiwibW91bnRPbkVudGVyIiwidW5tb3VudE9uRXhpdCIsIm9uRXhpdGVkIiwicG9zaXRpb24iLCJ6SW5kZXgiLCJzcXVhcmUiLCJwYiIsInNpemUiLCJzdGFydEljb24iLCJwbCIsImRhbmdlcm91c2x5U2V0SW5uZXJIVE1MIiwiX19odG1sIiwicCIsImdhcCIsInVuZGVmaW5lZCIsImNhdGNoIiwiX19hd2FpdGVyIiwidXNlTWFpbEFQSSIsImFkZEFsZXJ0IiwidXBkYXRlUmVhZFN0YXRlIiwiZGVsZXRlTG9jYWxNYWlsIiwidXBkYXRlTG9jYWxCdXR0b24iLCJ1c2VDYWxsYmFjayIsInN0YXR1cyIsInR5cGUiLCJfX2Fzc2lnbiIsIk9iamVjdCIsImFzc2lnbiIsInMiLCJpIiwiYXJndW1lbnRzIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJfX3NwcmVhZEFycmF5IiwidG8iLCJmcm9tIiwicGFjayIsImFyIiwibCIsIkFycmF5IiwiY29uY2F0IiwidXNlTWFpbEFjdGlvbnMiLCJpZCIsImN1ck1haWwiLCJ0YXJnZXRJbmRleCIsImZpbmRJbmRleCIsInN0b3JlZE1haWwiLCJuZXdNYWlsQXJyYXkiLCJmaWx0ZXIiLCJmb3J3YXJkUmVmIiwicHJvcHMiLCJyZWYiLCJlbGV2YXRpb24iLCJUeXBvZ3JhcGh5IiwibWF4V2lkdGgiLCJ3b3JkV3JhcCIsImNoaWxkcmVuIiwiUGhvbmVTbmFja2JhciIsInVzZVNuYWNrYmFyIiwiYWxlcnQiLCJpc09wZW4iLCJoYW5kbGVDbG9zZSIsIlNuYWNrYmFyIiwiYXV0b0hpZGVEdXJhdGlvbiIsImR1cmF0aW9uIiwib3BlbiIsImJvdHRvbSIsImxlZnQiLCJyaWdodCIsIm9uQ2xvc2UiLCJzZXZlcml0eSIsIlNuYWNrYmFyQ29udGV4dCIsImNyZWF0ZUNvbnRleHQiLCJ1c2VTdGF0ZSIsInNldE9wZW4iLCJzZXRBbGVydCIsIlByb3ZpZGVyIiwidXNlQ29udGV4dCIsIlMiLCJldmVudE5hbWUiLCJtb2NrUmVzcCIsIm9wdGlvbnMiLCJtZXRob2QiLCJoZWFkZXJzIiwiSlNPTiIsInN0cmluZ2lmeSIsImZldGNoIiwianNvbiIsImlzRW52QnJvd3NlciIsIkRheUZvcm1hdHRpbmciLCJNb250aEZvcm1hdHRpbmciLCJkYXRlU3RyaW5nIiwibWFpbERhdGUiLCJnZXREYXkiLCJnZXRIb3VycyIsImdldE1pbnV0ZXMiXSwic291cmNlUm9vdCI6IiJ9