"use strict";(self.webpackChunknpwd_app=self.webpackChunknpwd_app||[]).push([[250],{8333:(e,n,t)=>{var r=t(4836);n.Z=void 0;var o=r(t(4938)),a=t(5893),c=(0,o.default)((0,a.jsx)("path",{d:"M20 6h-4V4c0-1.11-.89-2-2-2h-4c-1.11 0-2 .89-2 2v2H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-6 0h-4V4h4v2z"}),"Work");n.Z=c},4121:(e,n,t)=>{t.d(n,{T:()=>c});var r=t(2950),o=t.n(r),a=t(8333),c=function(){return o().createElement(a.Z,{fontSize:"large"})}},9250:(e,n,t)=>{t.r(n),t.d(n,{externalAppConfig:()=>c,default:()=>i});var r=t(4023),o=t(4121),a=t(4274),c=function(){return{id:"services",nameLocale:"Services",color:"#fff",backgroundColor:"#FE3B73",path:"/services",icon:o.T,app:r.Z,theme:a.rS}};const i=c},4023:(e,n,t)=>{t.d(n,{Z:()=>x});var r,o,a=t(2950),c=t.n(a),i=t(5475),l=t(6235),u=t(3839),s=t.n(u),f=t(8440),p=t(4810),d=t(5974),h=t(6867),m=t(2658),b=t(4669),v=t(7405),y=t(7905),E=function(){return E=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e},E.apply(this,arguments)},Z=s().div(w||(r=["\n  flex: 1;\n  padding: 1.5rem;\n  display: flex;\n  box-sizing: border-box;\n  flex-direction: column;\n  overflow: auto;\n  max-height: 100%;\n  background-color: #fafafa;\n  ","\n"],o=["\n  flex: 1;\n  padding: 1.5rem;\n  display: flex;\n  box-sizing: border-box;\n  flex-direction: column;\n  overflow: auto;\n  max-height: 100%;\n  background-color: #fafafa;\n  ","\n"],Object.defineProperty?Object.defineProperty(r,"raw",{value:o}):r.raw=o,w=r),(function(e){return e.isDarkMode&&"\n    background-color: #212121;\n  "})),g=function(e){var n=(0,l.useHistory)(),t=(0,a.useState)([]),r=t[0],o=t[1],i=(0,a.useState)(null),u=i[0],s=i[1],E="dark"===e.theme.palette.mode;return(0,a.useEffect)((function(){(0,v.Z)("npwd:qb-services:getPlayers").then((function(e){o(e.data)}))}),[]),(0,a.useEffect)((function(){if(r){var e=null==r?void 0:r.reduce((function(e,n){return e[n.job]||(e[n.job]=[]),e[n.job].push(n),e}),{});s(e)}}),[r]),c().createElement(p.Z,{injectFirst:!0},c().createElement(d.Z,{theme:e.theme},c().createElement(Z,{isDarkMode:E},c().createElement(f.h,null,c().createElement(h.Z,{color:"primary",onClick:function(){return n.goBack()}},c().createElement(b.Z,null)),c().createElement(m.Z,{fontSize:24,color:"primary",fontWeight:"bold"},"Services")),u&&c().createElement(y.W,{isDarkMode:E,players:u}))))};const x=function(e){return c().createElement(i.NuiProvider,null,c().createElement(g,E({},e)))};var w},4274:(e,n,t)=>{t.d(n,{rS:()=>i});var r=t(3486),o=t(6115),a=r.Z[500],c=o.Z.white,i={palette:{primary:{main:a,dark:r.Z[700],light:r.Z[300],contrastText:c},secondary:{main:"#d32f2f",light:"#eb4242",dark:"#941212",contrastText:c},success:{main:"#2196f3",contrastText:c}}}},7905:(e,n,t)=>{t.d(n,{W:()=>h});var r=t(1508),o=t(2440),a=t(8277),c=t(8898),i=t(5266),l=t(6867),u=t(8584),s=t(2950),f=t.n(s),p=t(1145),d=t(7405),h=function(e){var n=e.players,t=e.isDarkMode,h=(0,s.useState)(null),m=h[0],b=h[1],v=!1,y=!1,E=!1;return f().createElement(r.Z,null,Object.keys(n).map((function(e){return f().createElement(o.Z,{subheader:f().createElement(a.Z,{sx:{cursor:"pointer"},onClick:function(){b(e)}},e.toUpperCase()+" - AVAILABLE")},f().createElement(c.Z,{in:m===e},n[e].map((function(e){if("police"==e.job&&(v=!0),"ambulance"==e.job&&(y=!0),"tow"==e.job&&(E=!0),"police"!=e.job&&"ambulance"!=e.job&&"tow"!=e.job)return f().createElement(i.ZP,{secondaryAction:f().createElement(l.Z,{onClick:function(){return n=e.phoneNumber,void(0,d.Z)("npwd:qb-services:callPlayer",{number:n}).then((function(e){console.log(e.data)}));var n}},f().createElement(p.Z,null))},f().createElement(u.Z,{primaryTypographyProps:{color:t?"#fff":"#000",fontWeight:"bold"},primary:e.name,secondary:e.phoneNumber}))}))))})),!v&&f().createElement(o.Z,{subheader:f().createElement(a.Z,{sx:{cursor:"pointer"}},"POLICE - UNAVAILABLE")}),!y&&f().createElement(o.Z,{subheader:f().createElement(a.Z,{sx:{cursor:"pointer"}},"AMBULANCE - UNAVAILABLE")}),!E&&f().createElement(o.Z,{subheader:f().createElement(a.Z,{sx:{cursor:"pointer"}},"TOW - UNAVAILABLE")}))}},8440:(e,n,t)=>{t.d(n,{h:()=>o});var r=t(3839),o=t.n(r)()("div")({width:"100%",justifyContent:"flex-start",display:"flex",alignItems:"center",gap:20,marginBottom:20})},7405:(e,n,t)=>{t.d(n,{Z:()=>o});var r=t(5181);const o=function(e,n,t){return o=this,a=void 0,i=function(){var o;return function(e,n){var t,r,o,a,c={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(a){return function(i){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;c;)try{if(t=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++,r=a[1],a=[0];continue;case 7:a=c.ops.pop(),c.trys.pop();continue;default:if(!((o=(o=c.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){c=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){c.label=a[1];break}if(6===a[0]&&c.label<o[1]){c.label=o[1],o=a;break}if(o&&c.label<o[2]){c.label=o[2],c.ops.push(a);break}o[2]&&c.ops.pop(),c.trys.pop();continue}a=n.call(e,c)}catch(e){a=[6,e],r=0}finally{t=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,i])}}}(this,(function(a){switch(a.label){case 0:return o={method:"post",headers:{"Content-Type":"application/json; charset=UTF-8"},body:JSON.stringify(n)},(0,r.Id)()&&t?[2,t]:[4,fetch("https://".concat("npwd_qb_services","/").concat(e),o)];case 1:return[4,a.sent().json()];case 2:return[2,a.sent()]}}))},new((c=void 0)||(c=Promise))((function(e,n){function t(e){try{l(i.next(e))}catch(e){n(e)}}function r(e){try{l(i.throw(e))}catch(e){n(e)}}function l(n){var o;n.done?e(n.value):(o=n.value,o instanceof c?o:new c((function(e){e(o)}))).then(t,r)}l((i=i.apply(o,a||[])).next())}));var o,a,c,i}},5181:(e,n,t)=>{t.d(n,{Id:()=>r});var r=function(){return!1}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjUwLmpzIiwibWFwcGluZ3MiOiJ1R0FFSUEsRUFBeUIsRUFBUSxNQUtyQ0MsRUFBUSxPQUFVLEVBRWxCLElBQUlDLEVBQWlCRixFQUF1QixFQUFRLE9BRWhERyxFQUFjLEVBQVEsTUFFdEJDLEdBQVcsRUFBSUYsRUFBZUcsVUFBdUIsRUFBSUYsRUFBWUcsS0FBSyxPQUFRLENBQ3BGQyxFQUFHLDRKQUNELFFBRUpOLEVBQVEsRUFBVUcsRyxpRUNmUEksRUFBZSxXQUN0QixPQUFPLGtCQUFvQixJQUFVLENBQUVDLFNBQVUsWSx1R0NBMUNDLEVBQW9CLFdBQWMsTUFBTyxDQUNoREMsR0FBSSxXQUNKQyxXQUFZLFdBQ1pDLE1BQU8sT0FDUEMsZ0JBQWlCLFVBQ2pCQyxLQUFNLFlBQ05DLEtBQU0sSUFDTkMsSUFBSyxJQUNMQyxNQUFPLE9BRVgsVyxvQ0NiNEVDLEVBQVFDLEUsMElBSWhGQyxFQUFzQyxXQVN0QyxPQVJBQSxFQUFXQyxPQUFPQyxRQUFVLFNBQVNDLEdBQ2pDLElBQUssSUFBSUMsRUFBR0MsRUFBSSxFQUFHQyxFQUFJQyxVQUFVQyxPQUFRSCxFQUFJQyxFQUFHRCxJQUU1QyxJQUFLLElBQUlJLEtBRFRMLEVBQUlHLFVBQVVGLEdBQ09KLE9BQU9TLFVBQVVDLGVBQWVDLEtBQUtSLEVBQUdLLEtBQ3pETixFQUFFTSxHQUFLTCxFQUFFSyxJQUVqQixPQUFPTixHQUVKSCxFQUFTYSxNQUFNQyxLQUFNUCxZQVc1QlEsRUFBWSxRQUFXQyxJQXhCaURsQixFQXdCWSxDQUFDLHFMQUFzTCxNQXhCM0xDLEVBd0JrTSxDQUFDLHFMQUFzTCxNQXZCcmNFLE9BQU9nQixlQUFrQmhCLE9BQU9nQixlQUFlbkIsRUFBUSxNQUFPLENBQUVvQixNQUFPbkIsSUFBaUJELEVBQU9DLElBQU1BLEVBdUI3RGlCLEVBdEJyQ2xCLElBc0IyYyxTQUFVcUIsR0FFNWQsT0FEaUJBLEVBQUdDLFlBRWhCLDBDQUVKQyxFQUFNLFNBQVVDLEdBQ2hCLElBQUlDLEdBQVUsSUFBQUMsY0FDVkwsR0FBSyxJQUFBTSxVQUFTLElBQUtDLEVBQVVQLEVBQUcsR0FBSVEsRUFBYVIsRUFBRyxHQUNwRFMsR0FBSyxJQUFBSCxVQUFTLE1BQU9JLEVBQWdCRCxFQUFHLEdBQUlFLEVBQW1CRixFQUFHLEdBQ2xFUixFQUEwQyxTQUE3QkUsRUFBTXpCLE1BQU1rQyxRQUFRQyxLQWlCckMsT0FoQkEsSUFBQUMsWUFBVSxZQUNOLE9BQVMsK0JBQStCQyxNQUFLLFNBQVVDLEdBQ25EUixFQUFXUSxFQUFLQyxXQUVyQixLQUNILElBQUFILFlBQVUsV0FDTixHQUFJUCxFQUFTLENBQ1QsSUFBSVcsRUFBZVgsTUFBQUEsT0FBeUMsRUFBU0EsRUFBUVksUUFBTyxTQUFVQyxFQUFjQyxHQUl4RyxPQUhLRCxFQUFhQyxFQUFPQyxPQUNyQkYsRUFBYUMsRUFBT0MsS0FBTyxJQUMvQkYsRUFBYUMsRUFBT0MsS0FBS0MsS0FBS0YsR0FDdkJELElBQ1IsSUFDSFQsRUFBaUJPLE1BRXRCLENBQUNYLElBQ0ksa0JBQW9CLElBQXNCLENBQUVpQixhQUFhLEdBQzdELGtCQUFvQixJQUFlLENBQUU5QyxNQUFPeUIsRUFBTXpCLE9BQzlDLGtCQUFvQmtCLEVBQVcsQ0FBRUssV0FBWUEsR0FDekMsa0JBQW9CLElBQVEsS0FDeEIsa0JBQW9CLElBQVksQ0FBRTVCLE1BQU8sVUFBV29ELFFBQVMsV0FBYyxPQUFPckIsRUFBUXNCLFdBQ3RGLGtCQUFvQixJQUFXLE9BQ25DLGtCQUFvQixJQUFZLENBQUV6RCxTQUFVLEdBQUlJLE1BQU8sVUFBV3NELFdBQVksUUFBVSxhQUM1RmpCLEdBQWlCLGtCQUFvQixJQUFhLENBQUVULFdBQVlBLEVBQVlNLFFBQVNHLFFBSXJHLFFBRm9CLFNBQVVQLEdBQVMsT0FBUSxrQkFBb0IsRUFBQXlCLFlBQWEsS0FDNUUsa0JBQW9CMUIsRUFBS3JCLEVBQVMsR0FBSXNCLE1BRTFDLElBQUlOLEcseURDN0RPZ0MsRUFBb0IsU0FDcEJDLEVBQWlCLFVBQ2pCcEQsRUFBUSxDQUNma0MsUUFBUyxDQUNMbUIsUUFBUyxDQUNMQyxLQUFNSCxFQUNOSSxLQUFNLFNBQ05DLE1BQU8sU0FDUEMsYUFBY0wsR0FFbEJNLFVBQVcsQ0FDUEosS0FBTSxVQUNORSxNQUFPLFVBQ1BELEtBQU0sVUFDTkUsYUFBY0wsR0FFbEJPLFFBQVMsQ0FDTEwsS0FBTSxVQUNORyxhQUFjTCxNLGlKQ2ZmUSxFQUFjLFNBQVV0QyxHQUMvQixJQUFJTyxFQUFVUCxFQUFHTyxRQUFTTixFQUFhRCxFQUFHQyxXQUN0Q1EsR0FBSyxJQUFBSCxVQUFTLE1BQU9pQyxFQUFhOUIsRUFBRyxHQUFJK0IsRUFBZ0IvQixFQUFHLEdBUzVEZ0MsR0FBZSxFQUNmQyxHQUFrQixFQUNsQkMsR0FBWSxFQUNoQixPQUFRLGtCQUFvQixJQUFLLEtBQzdCN0QsT0FBTzhELEtBQUtyQyxHQUFTc0MsS0FBSSxTQUFVQyxHQUFPLE9BQVEsa0JBQW9CLElBQU0sQ0FBRUMsVUFBVyxrQkFBb0IsSUFBZSxDQUFFQyxHQUFJLENBQUVDLE9BQVEsV0FBYXhCLFFBQVMsV0FYbEtlLEVBV2tNTSxLQUFXQSxFQUFJSSxjQUFnQixpQkFDN04sa0JBQW9CLElBQVUsQ0FBRUMsR0FBSVosSUFBZU8sR0FBT3ZDLEVBQVF1QyxHQUFLRCxLQUFJLFNBQVV4QixHQWFqRixHQVprQixVQUFkQSxFQUFPQyxNQUNQbUIsR0FBZSxHQUdELGFBQWRwQixFQUFPQyxNQUNQb0IsR0FBa0IsR0FHSixPQUFkckIsRUFBT0MsTUFDUHFCLEdBQVksR0FHRSxVQUFkdEIsRUFBT0MsS0FBaUMsYUFBZEQsRUFBT0MsS0FBb0MsT0FBZEQsRUFBT0MsSUFDOUQsT0FBUSxrQkFBb0IsS0FBVSxDQUFFOEIsZ0JBQWlCLGtCQUFvQixJQUFZLENBQUUzQixRQUFTLFdBQWMsT0F4QmpHNEIsRUF3QnlIaEMsRUFBT2lDLGlCQXZCN0osT0FBUyw4QkFBK0IsQ0FBRUQsT0FBUUEsSUFBVXRDLE1BQUssU0FBVXdDLEdBQ3ZFQyxRQUFRQyxJQUFJRixFQUFJdEMsU0FGRCxJQUFVb0MsSUF5QlQsa0JBQW9CLElBQVcsUUFDbkMsa0JBQW9CLElBQWMsQ0FBRUssdUJBQXdCLENBQ3BEckYsTUFBTzRCLEVBQWEsT0FBUyxPQUM3QjBCLFdBQVksUUFDYkksUUFBU1YsRUFBT3NDLEtBQU12QixVQUFXZixFQUFPaUMsd0JBRzlEYixHQUFnQixrQkFBb0IsSUFBTSxDQUFFTSxVQUFXLGtCQUFvQixJQUFlLENBQUVDLEdBQUksQ0FBRUMsT0FBUSxZQUFlLDJCQUN6SFAsR0FBbUIsa0JBQW9CLElBQU0sQ0FBRUssVUFBVyxrQkFBb0IsSUFBZSxDQUFFQyxHQUFJLENBQUVDLE9BQVEsWUFBZSw4QkFDNUhOLEdBQWEsa0JBQW9CLElBQU0sQ0FBRUksVUFBVyxrQkFBb0IsSUFBZSxDQUFFQyxHQUFJLENBQUVDLE9BQVEsWUFBZSwwQiw4Q0MzQ3BIVyxFLE1BQVMsR0FBTyxNQUFQLENBQWMsQ0FDOUJDLE1BQU8sT0FDUEMsZUFBZ0IsYUFDaEJDLFFBQVMsT0FDVEMsV0FBWSxTQUNaQyxJQUFLLEdBQ0xDLGFBQWMsTSw4Q0NpRWxCLFFBNUJBLFNBQWtCQyxFQUFXbEQsRUFBTW1ELEdBQy9CLE9BN0NrREMsRUE2Q2pDMUUsS0E3QzBDMkUsT0E2Q3BDLEVBN0NtREMsRUE2Q25DLFdBQ25DLElBQUlDLEVBQ0osT0F0Q3dDLFNBQVVILEVBQVNJLEdBQy9ELElBQXNHQyxFQUFHQyxFQUFHM0YsRUFBRzRGLEVBQTNHQyxFQUFJLENBQUVDLE1BQU8sRUFBR0MsS0FBTSxXQUFhLEdBQVcsRUFBUC9GLEVBQUUsR0FBUSxNQUFNQSxFQUFFLEdBQUksT0FBT0EsRUFBRSxJQUFPZ0csS0FBTSxHQUFJQyxJQUFLLElBQ2hHLE9BQU9MLEVBQUksQ0FBRU0sS0FBTUMsRUFBSyxHQUFJLE1BQVNBLEVBQUssR0FBSSxPQUFVQSxFQUFLLElBQXdCLG1CQUFYQyxTQUEwQlIsRUFBRVEsT0FBT0MsVUFBWSxXQUFhLE9BQU8xRixPQUFVaUYsRUFDdkosU0FBU08sRUFBS2hHLEdBQUssT0FBTyxTQUFVbUcsR0FBSyxPQUN6QyxTQUFjQyxHQUNWLEdBQUliLEVBQUcsTUFBTSxJQUFJYyxVQUFVLG1DQUMzQixLQUFPWCxPQUNILEdBQUlILEVBQUksRUFBR0MsSUFBTTNGLEVBQVksRUFBUnVHLEVBQUcsR0FBU1osRUFBVSxPQUFJWSxFQUFHLEdBQUtaLEVBQVMsU0FBTzNGLEVBQUkyRixFQUFVLFNBQU0zRixFQUFFUyxLQUFLa0YsR0FBSSxHQUFLQSxFQUFFTyxTQUFXbEcsRUFBSUEsRUFBRVMsS0FBS2tGLEVBQUdZLEVBQUcsS0FBS0UsS0FBTSxPQUFPekcsRUFFM0osT0FESTJGLEVBQUksRUFBRzNGLElBQUd1RyxFQUFLLENBQVMsRUFBUkEsRUFBRyxHQUFRdkcsRUFBRWUsUUFDekJ3RixFQUFHLElBQ1AsS0FBSyxFQUFHLEtBQUssRUFBR3ZHLEVBQUl1RyxFQUFJLE1BQ3hCLEtBQUssRUFBYyxPQUFYVixFQUFFQyxRQUFnQixDQUFFL0UsTUFBT3dGLEVBQUcsR0FBSUUsTUFBTSxHQUNoRCxLQUFLLEVBQUdaLEVBQUVDLFFBQVNILEVBQUlZLEVBQUcsR0FBSUEsRUFBSyxDQUFDLEdBQUksU0FDeEMsS0FBSyxFQUFHQSxFQUFLVixFQUFFSSxJQUFJUyxNQUFPYixFQUFFRyxLQUFLVSxNQUFPLFNBQ3hDLFFBQ0ksTUFBa0IxRyxHQUFaQSxFQUFJNkYsRUFBRUcsTUFBWTNGLE9BQVMsR0FBS0wsRUFBRUEsRUFBRUssT0FBUyxLQUFrQixJQUFWa0csRUFBRyxJQUFzQixJQUFWQSxFQUFHLElBQVcsQ0FBRVYsRUFBSSxFQUFHLFNBQ2pHLEdBQWMsSUFBVlUsRUFBRyxNQUFjdkcsR0FBTXVHLEVBQUcsR0FBS3ZHLEVBQUUsSUFBTXVHLEVBQUcsR0FBS3ZHLEVBQUUsSUFBTSxDQUFFNkYsRUFBRUMsTUFBUVMsRUFBRyxHQUFJLE1BQzlFLEdBQWMsSUFBVkEsRUFBRyxJQUFZVixFQUFFQyxNQUFROUYsRUFBRSxHQUFJLENBQUU2RixFQUFFQyxNQUFROUYsRUFBRSxHQUFJQSxFQUFJdUcsRUFBSSxNQUM3RCxHQUFJdkcsR0FBSzZGLEVBQUVDLE1BQVE5RixFQUFFLEdBQUksQ0FBRTZGLEVBQUVDLE1BQVE5RixFQUFFLEdBQUk2RixFQUFFSSxJQUFJMUQsS0FBS2dFLEdBQUssTUFDdkR2RyxFQUFFLElBQUk2RixFQUFFSSxJQUFJUyxNQUNoQmIsRUFBRUcsS0FBS1UsTUFBTyxTQUV0QkgsRUFBS2QsRUFBS2hGLEtBQUs0RSxFQUFTUSxHQUMxQixNQUFPYyxHQUFLSixFQUFLLENBQUMsRUFBR0ksR0FBSWhCLEVBQUksRUFBSyxRQUFVRCxFQUFJMUYsRUFBSSxFQUN0RCxHQUFZLEVBQVJ1RyxFQUFHLEdBQVEsTUFBTUEsRUFBRyxHQUFJLE1BQU8sQ0FBRXhGLE1BQU93RixFQUFHLEdBQUtBLEVBQUcsUUFBSyxFQUFRRSxNQUFNLEdBckI5QkcsQ0FBSyxDQUFDekcsRUFBR21HLE1BbUM5Q08sQ0FBWWxHLE1BQU0sU0FBVUssR0FDL0IsT0FBUUEsRUFBRzhFLE9BQ1AsS0FBSyxFQVFELE9BUEFOLEVBQVUsQ0FDTnNCLE9BQVEsT0FDUkMsUUFBUyxDQUNMLGVBQWdCLG1DQUVwQnRCLEtBQU11QixLQUFLQyxVQUFVaEYsS0FFckIsV0FBa0JtRCxFQUNYLENBQUMsRUFBY0EsR0FHbkIsQ0FBQyxFQUFhOEIsTUFBTSxXQUFXQyxPQUR2QixtQkFDNEMsS0FBS0EsT0FBT2hDLEdBQVlLLElBQ3ZGLEtBQUssRUFFRCxNQUFPLENBQUMsRUFERHhFLEVBQUcrRSxPQUNnQnFCLFFBQzlCLEtBQUssRUFFRCxNQUFPLENBQUMsRUFETXBHLEVBQUcrRSxhQWhFMUIsS0FGZ0VzQixPQTZDeEMsS0EzQ2JBLEVBQUlDLFdBQVUsU0FBVUMsRUFBU0MsR0FDL0MsU0FBU0MsRUFBVTFHLEdBQVMsSUFBTTZGLEVBQUtyQixFQUFVVyxLQUFLbkYsSUFBVyxNQUFPNEYsR0FBS2EsRUFBT2IsSUFDcEYsU0FBU2UsRUFBUzNHLEdBQVMsSUFBTTZGLEVBQUtyQixFQUFpQixNQUFFeEUsSUFBVyxNQUFPNEYsR0FBS2EsRUFBT2IsSUFDdkYsU0FBU0MsRUFBS2UsR0FKbEIsSUFBZTVHLEVBSWE0RyxFQUFPbEIsS0FBT2MsRUFBUUksRUFBTzVHLFFBSjFDQSxFQUl5RDRHLEVBQU81RyxNQUpoREEsYUFBaUJzRyxFQUFJdEcsRUFBUSxJQUFJc0csR0FBRSxTQUFVRSxHQUFXQSxFQUFReEcsT0FJVGdCLEtBQUswRixFQUFXQyxHQUNsR2QsR0FBTXJCLEVBQVlBLEVBQVU3RSxNQUFNMkUsRUFBU0MsR0FBYyxLQUFLWSxXQU4xQixJQUFVYixFQUFTQyxFQUFZK0IsRUFBRzlCLEksaUNDQXZFLElBQUlxQyxFQUFlLFdBQ3RCLE9BQU8iLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ucHdkLWFwcC8uL25vZGVfbW9kdWxlcy9AbXVpL2ljb25zLW1hdGVyaWFsL1dvcmsuanMiLCJ3ZWJwYWNrOi8vbnB3ZC1hcHAvLi9pY29uLnRzeCIsIndlYnBhY2s6Ly9ucHdkLWFwcC8uL25wd2QuY29uZmlnLnRzIiwid2VicGFjazovL25wd2QtYXBwLy4vc3JjL0FwcC50c3giLCJ3ZWJwYWNrOi8vbnB3ZC1hcHAvLi9zcmMvYXBwLnRoZW1lLnRzIiwid2VicGFjazovL25wd2QtYXBwLy4vc3JjL2NvbXBvbmVudHMvUGxheWVyc0xpc3QudHN4Iiwid2VicGFjazovL25wd2QtYXBwLy4vc3JjL3N0eWxlcy9oZWFkZXIuc3R5bGVzLnRzIiwid2VicGFjazovL25wd2QtYXBwLy4vc3JjL3V0aWxzL2ZldGNoTnVpLnRzIiwid2VicGFjazovL25wd2QtYXBwLy4vc3JjL3V0aWxzL21pc2MudHMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0ID0gcmVxdWlyZShcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvaW50ZXJvcFJlcXVpcmVEZWZhdWx0XCIpO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gdm9pZCAwO1xuXG52YXIgX2NyZWF0ZVN2Z0ljb24gPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL3V0aWxzL2NyZWF0ZVN2Z0ljb25cIikpO1xuXG52YXIgX2pzeFJ1bnRpbWUgPSByZXF1aXJlKFwicmVhY3QvanN4LXJ1bnRpbWVcIik7XG5cbnZhciBfZGVmYXVsdCA9ICgwLCBfY3JlYXRlU3ZnSWNvbi5kZWZhdWx0KSggLyojX19QVVJFX18qLygwLCBfanN4UnVudGltZS5qc3gpKFwicGF0aFwiLCB7XG4gIGQ6IFwiTTIwIDZoLTRWNGMwLTEuMTEtLjg5LTItMi0yaC00Yy0xLjExIDAtMiAuODktMiAydjJINGMtMS4xMSAwLTEuOTkuODktMS45OSAyTDIgMTljMCAxLjExLjg5IDIgMiAyaDE2YzEuMTEgMCAyLS44OSAyLTJWOGMwLTEuMTEtLjg5LTItMi0yem0tNiAwaC00VjRoNHYyelwiXG59KSwgJ1dvcmsnKTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gX2RlZmF1bHQ7IiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IFdvcmtJY29uIGZyb20gJ0BtdWkvaWNvbnMtbWF0ZXJpYWwvV29yayc7XHJcbmV4cG9ydCB2YXIgU2VydmljZXNJY29uID0gZnVuY3Rpb24gKCkge1xyXG4gICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoV29ya0ljb24sIHsgZm9udFNpemU6IFwibGFyZ2VcIiB9KTtcclxufTtcclxuIiwiaW1wb3J0IEFwcCBmcm9tICcuL3NyYy9BcHAnO1xyXG5pbXBvcnQgeyBTZXJ2aWNlc0ljb24gfSBmcm9tICcuL2ljb24nO1xyXG5pbXBvcnQgeyB0aGVtZSB9IGZyb20gJy4vc3JjL2FwcC50aGVtZSc7XHJcbmV4cG9ydCB2YXIgZXh0ZXJuYWxBcHBDb25maWcgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAoe1xyXG4gICAgaWQ6ICdzZXJ2aWNlcycsXHJcbiAgICBuYW1lTG9jYWxlOiAnU2VydmljZXMnLFxyXG4gICAgY29sb3I6ICcjZmZmJyxcclxuICAgIGJhY2tncm91bmRDb2xvcjogJyNGRTNCNzMnLFxyXG4gICAgcGF0aDogJy9zZXJ2aWNlcycsXHJcbiAgICBpY29uOiBTZXJ2aWNlc0ljb24sXHJcbiAgICBhcHA6IEFwcCxcclxuICAgIHRoZW1lOiB0aGVtZSxcclxufSk7IH07XHJcbmV4cG9ydCBkZWZhdWx0IGV4dGVybmFsQXBwQ29uZmlnO1xyXG4iLCJ2YXIgX19tYWtlVGVtcGxhdGVPYmplY3QgPSAodGhpcyAmJiB0aGlzLl9fbWFrZVRlbXBsYXRlT2JqZWN0KSB8fCBmdW5jdGlvbiAoY29va2VkLCByYXcpIHtcclxuICAgIGlmIChPYmplY3QuZGVmaW5lUHJvcGVydHkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KGNvb2tlZCwgXCJyYXdcIiwgeyB2YWx1ZTogcmF3IH0pOyB9IGVsc2UgeyBjb29rZWQucmF3ID0gcmF3OyB9XHJcbiAgICByZXR1cm4gY29va2VkO1xyXG59O1xyXG52YXIgX19hc3NpZ24gPSAodGhpcyAmJiB0aGlzLl9fYXNzaWduKSB8fCBmdW5jdGlvbiAoKSB7XHJcbiAgICBfX2Fzc2lnbiA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24odCkge1xyXG4gICAgICAgIGZvciAodmFyIHMsIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xyXG4gICAgICAgICAgICBzID0gYXJndW1lbnRzW2ldO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkpXHJcbiAgICAgICAgICAgICAgICB0W3BdID0gc1twXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHQ7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIF9fYXNzaWduLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcbn07XHJcbmltcG9ydCBSZWFjdCwgeyB1c2VFZmZlY3QsIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBOdWlQcm92aWRlciB9IGZyb20gJ3JlYWN0LWZpdmVtLWhvb2tzJztcclxuaW1wb3J0IHsgdXNlSGlzdG9yeSB9IGZyb20gJ3JlYWN0LXJvdXRlci1kb20nO1xyXG5pbXBvcnQgc3R5bGVkIGZyb20gJ3N0eWxlZC1jb21wb25lbnRzJztcclxuaW1wb3J0IHsgSGVhZGVyIH0gZnJvbSAnLi9zdHlsZXMvaGVhZGVyLnN0eWxlcyc7XHJcbmltcG9ydCB7IEljb25CdXR0b24sIFN0eWxlZEVuZ2luZVByb3ZpZGVyLCBUaGVtZVByb3ZpZGVyLCBUeXBvZ3JhcGh5IH0gZnJvbSAnQG11aS9tYXRlcmlhbCc7XHJcbmltcG9ydCB7IEFycm93QmFjayB9IGZyb20gJ0BtdWkvaWNvbnMtbWF0ZXJpYWwnO1xyXG5pbXBvcnQgZmV0Y2hOdWkgZnJvbSAnLi91dGlscy9mZXRjaE51aSc7XHJcbmltcG9ydCB7IFBsYXllcnNMaXN0IH0gZnJvbSAnLi9jb21wb25lbnRzL1BsYXllcnNMaXN0JztcclxudmFyIENvbnRhaW5lciA9IHN0eWxlZC5kaXYodGVtcGxhdGVPYmplY3RfMSB8fCAodGVtcGxhdGVPYmplY3RfMSA9IF9fbWFrZVRlbXBsYXRlT2JqZWN0KFtcIlxcbiAgZmxleDogMTtcXG4gIHBhZGRpbmc6IDEuNXJlbTtcXG4gIGRpc3BsYXk6IGZsZXg7XFxuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcXG4gIG92ZXJmbG93OiBhdXRvO1xcbiAgbWF4LWhlaWdodDogMTAwJTtcXG4gIGJhY2tncm91bmQtY29sb3I6ICNmYWZhZmE7XFxuICBcIiwgXCJcXG5cIl0sIFtcIlxcbiAgZmxleDogMTtcXG4gIHBhZGRpbmc6IDEuNXJlbTtcXG4gIGRpc3BsYXk6IGZsZXg7XFxuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcXG4gIG92ZXJmbG93OiBhdXRvO1xcbiAgbWF4LWhlaWdodDogMTAwJTtcXG4gIGJhY2tncm91bmQtY29sb3I6ICNmYWZhZmE7XFxuICBcIiwgXCJcXG5cIl0pKSwgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICB2YXIgaXNEYXJrTW9kZSA9IF9hLmlzRGFya01vZGU7XHJcbiAgICByZXR1cm4gaXNEYXJrTW9kZSAmJlxyXG4gICAgICAgIFwiXFxuICAgIGJhY2tncm91bmQtY29sb3I6ICMyMTIxMjE7XFxuICBcIjtcclxufSk7XHJcbnZhciBBcHAgPSBmdW5jdGlvbiAocHJvcHMpIHtcclxuICAgIHZhciBoaXN0b3J5ID0gdXNlSGlzdG9yeSgpO1xyXG4gICAgdmFyIF9hID0gdXNlU3RhdGUoW10pLCBwbGF5ZXJzID0gX2FbMF0sIHNldFBsYXllcnMgPSBfYVsxXTtcclxuICAgIHZhciBfYiA9IHVzZVN0YXRlKG51bGwpLCBtYXBwZWRQbGF5ZXJzID0gX2JbMF0sIHNldE1hcHBlZFBsYXllcnMgPSBfYlsxXTtcclxuICAgIHZhciBpc0RhcmtNb2RlID0gcHJvcHMudGhlbWUucGFsZXR0ZS5tb2RlID09PSAnZGFyayc7XHJcbiAgICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGZldGNoTnVpKCducHdkOnFiLXNlcnZpY2VzOmdldFBsYXllcnMnKS50aGVuKGZ1bmN0aW9uIChyZXNwKSB7XHJcbiAgICAgICAgICAgIHNldFBsYXllcnMocmVzcC5kYXRhKTtcclxuICAgICAgICB9KTtcclxuICAgIH0sIFtdKTtcclxuICAgIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHBsYXllcnMpIHtcclxuICAgICAgICAgICAgdmFyIG1hcHBlZFBsYXllciA9IHBsYXllcnMgPT09IG51bGwgfHwgcGxheWVycyA9PT0gdm9pZCAwID8gdm9pZCAwIDogcGxheWVycy5yZWR1Y2UoZnVuY3Rpb24gKHBsYXllcnNHcm91cCwgcGxheWVyKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXBsYXllcnNHcm91cFtwbGF5ZXIuam9iXSlcclxuICAgICAgICAgICAgICAgICAgICBwbGF5ZXJzR3JvdXBbcGxheWVyLmpvYl0gPSBbXTtcclxuICAgICAgICAgICAgICAgIHBsYXllcnNHcm91cFtwbGF5ZXIuam9iXS5wdXNoKHBsYXllcik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcGxheWVyc0dyb3VwO1xyXG4gICAgICAgICAgICB9LCB7fSk7XHJcbiAgICAgICAgICAgIHNldE1hcHBlZFBsYXllcnMobWFwcGVkUGxheWVyKTtcclxuICAgICAgICB9XHJcbiAgICB9LCBbcGxheWVyc10pO1xyXG4gICAgcmV0dXJuIChSZWFjdC5jcmVhdGVFbGVtZW50KFN0eWxlZEVuZ2luZVByb3ZpZGVyLCB7IGluamVjdEZpcnN0OiB0cnVlIH0sXHJcbiAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChUaGVtZVByb3ZpZGVyLCB7IHRoZW1lOiBwcm9wcy50aGVtZSB9LFxyXG4gICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KENvbnRhaW5lciwgeyBpc0RhcmtNb2RlOiBpc0RhcmtNb2RlIH0sXHJcbiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KEhlYWRlciwgbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KEljb25CdXR0b24sIHsgY29sb3I6IFwicHJpbWFyeVwiLCBvbkNsaWNrOiBmdW5jdGlvbiAoKSB7IHJldHVybiBoaXN0b3J5LmdvQmFjaygpOyB9IH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoQXJyb3dCYWNrLCBudWxsKSksXHJcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChUeXBvZ3JhcGh5LCB7IGZvbnRTaXplOiAyNCwgY29sb3I6IFwicHJpbWFyeVwiLCBmb250V2VpZ2h0OiBcImJvbGRcIiB9LCBcIlNlcnZpY2VzXCIpKSxcclxuICAgICAgICAgICAgICAgIG1hcHBlZFBsYXllcnMgJiYgUmVhY3QuY3JlYXRlRWxlbWVudChQbGF5ZXJzTGlzdCwgeyBpc0RhcmtNb2RlOiBpc0RhcmtNb2RlLCBwbGF5ZXJzOiBtYXBwZWRQbGF5ZXJzIH0pKSkpKTtcclxufTtcclxudmFyIFdpdGhQcm92aWRlcnMgPSBmdW5jdGlvbiAocHJvcHMpIHsgcmV0dXJuIChSZWFjdC5jcmVhdGVFbGVtZW50KE51aVByb3ZpZGVyLCBudWxsLFxyXG4gICAgUmVhY3QuY3JlYXRlRWxlbWVudChBcHAsIF9fYXNzaWduKHt9LCBwcm9wcykpKSk7IH07XHJcbmV4cG9ydCBkZWZhdWx0IFdpdGhQcm92aWRlcnM7XHJcbnZhciB0ZW1wbGF0ZU9iamVjdF8xO1xyXG4iLCJpbXBvcnQgeyBjb21tb24sIGdyZWVuIH0gZnJvbSAnQG11aS9tYXRlcmlhbC9jb2xvcnMnO1xyXG5leHBvcnQgdmFyIEFQUF9QUklNQVJZX0NPTE9SID0gZ3JlZW5bNTAwXTtcclxuZXhwb3J0IHZhciBBUFBfVEVYVF9DT0xPUiA9IGNvbW1vbi53aGl0ZTtcclxuZXhwb3J0IHZhciB0aGVtZSA9IHtcclxuICAgIHBhbGV0dGU6IHtcclxuICAgICAgICBwcmltYXJ5OiB7XHJcbiAgICAgICAgICAgIG1haW46IEFQUF9QUklNQVJZX0NPTE9SLFxyXG4gICAgICAgICAgICBkYXJrOiBncmVlbls3MDBdLFxyXG4gICAgICAgICAgICBsaWdodDogZ3JlZW5bMzAwXSxcclxuICAgICAgICAgICAgY29udHJhc3RUZXh0OiBBUFBfVEVYVF9DT0xPUixcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNlY29uZGFyeToge1xyXG4gICAgICAgICAgICBtYWluOiAnI2QzMmYyZicsXHJcbiAgICAgICAgICAgIGxpZ2h0OiAnI2ViNDI0MicsXHJcbiAgICAgICAgICAgIGRhcms6ICcjOTQxMjEyJyxcclxuICAgICAgICAgICAgY29udHJhc3RUZXh0OiBBUFBfVEVYVF9DT0xPUixcclxuICAgICAgICB9LFxyXG4gICAgICAgIHN1Y2Nlc3M6IHtcclxuICAgICAgICAgICAgbWFpbjogJyMyMTk2ZjMnLFxyXG4gICAgICAgICAgICBjb250cmFzdFRleHQ6IEFQUF9URVhUX0NPTE9SLFxyXG4gICAgICAgIH0sXHJcbiAgICB9LFxyXG59O1xyXG4iLCJpbXBvcnQgeyBCb3gsIExpc3RJdGVtLCBMaXN0LCBMaXN0U3ViaGVhZGVyLCBDb2xsYXBzZSwgSWNvbkJ1dHRvbiwgTGlzdEl0ZW1UZXh0LCB9IGZyb20gJ0BtdWkvbWF0ZXJpYWwnO1xyXG5pbXBvcnQgUmVhY3QsIHsgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCBQaG9uZUljb24gZnJvbSAnQG11aS9pY29ucy1tYXRlcmlhbC9QaG9uZSc7XHJcbmltcG9ydCBmZXRjaE51aSBmcm9tICcuLi91dGlscy9mZXRjaE51aSc7XHJcbmV4cG9ydCB2YXIgUGxheWVyc0xpc3QgPSBmdW5jdGlvbiAoX2EpIHtcclxuICAgIHZhciBwbGF5ZXJzID0gX2EucGxheWVycywgaXNEYXJrTW9kZSA9IF9hLmlzRGFya01vZGU7XHJcbiAgICB2YXIgX2IgPSB1c2VTdGF0ZShudWxsKSwgY29sbGFwc2VJZCA9IF9iWzBdLCBzZXRDb2xsYXBzZUlkID0gX2JbMV07XHJcbiAgICB2YXIgZXhwYW5kSXRlbSA9IGZ1bmN0aW9uIChpZCkge1xyXG4gICAgICAgIHNldENvbGxhcHNlSWQoaWQpO1xyXG4gICAgfTtcclxuICAgIHZhciBoYW5kbGVDYWxsUGxheWVyID0gZnVuY3Rpb24gKG51bWJlcikge1xyXG4gICAgICAgIGZldGNoTnVpKCducHdkOnFiLXNlcnZpY2VzOmNhbGxQbGF5ZXInLCB7IG51bWJlcjogbnVtYmVyIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhyZXMuZGF0YSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgdmFyIHBvbGljZU9ubGluZSA9IGZhbHNlO1xyXG4gICAgdmFyIGFtYnVsYW5jZU9ubGluZSA9IGZhbHNlO1xyXG4gICAgdmFyIHRvd09ubGluZSA9IGZhbHNlO1xyXG4gICAgcmV0dXJuIChSZWFjdC5jcmVhdGVFbGVtZW50KEJveCwgbnVsbCxcclxuICAgICAgICBPYmplY3Qua2V5cyhwbGF5ZXJzKS5tYXAoZnVuY3Rpb24gKGtleSkgeyByZXR1cm4gKFJlYWN0LmNyZWF0ZUVsZW1lbnQoTGlzdCwgeyBzdWJoZWFkZXI6IFJlYWN0LmNyZWF0ZUVsZW1lbnQoTGlzdFN1YmhlYWRlciwgeyBzeDogeyBjdXJzb3I6ICdwb2ludGVyJyB9LCBvbkNsaWNrOiBmdW5jdGlvbiAoKSB7IHJldHVybiBleHBhbmRJdGVtKGtleSk7IH0gfSwga2V5LnRvVXBwZXJDYXNlKCkgKyBcIiAtIEFWQUlMQUJMRVwiKSB9LFxyXG4gICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KENvbGxhcHNlLCB7IGluOiBjb2xsYXBzZUlkID09PSBrZXkgfSwgcGxheWVyc1trZXldLm1hcChmdW5jdGlvbiAocGxheWVyKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocGxheWVyLmpvYiA9PSBcInBvbGljZVwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcG9saWNlT25saW5lID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIDtcclxuICAgICAgICAgICAgICAgIGlmIChwbGF5ZXIuam9iID09IFwiYW1idWxhbmNlXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICBhbWJ1bGFuY2VPbmxpbmUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgO1xyXG4gICAgICAgICAgICAgICAgaWYgKHBsYXllci5qb2IgPT0gXCJ0b3dcIikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRvd09ubGluZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICA7XHJcbiAgICAgICAgICAgICAgICBpZiAocGxheWVyLmpvYiAhPSBcInBvbGljZVwiICYmIHBsYXllci5qb2IgIT0gXCJhbWJ1bGFuY2VcIiAmJiBwbGF5ZXIuam9iICE9IFwidG93XCIpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFJlYWN0LmNyZWF0ZUVsZW1lbnQoTGlzdEl0ZW0sIHsgc2Vjb25kYXJ5QWN0aW9uOiBSZWFjdC5jcmVhdGVFbGVtZW50KEljb25CdXR0b24sIHsgb25DbGljazogZnVuY3Rpb24gKCkgeyByZXR1cm4gaGFuZGxlQ2FsbFBsYXllcihwbGF5ZXIucGhvbmVOdW1iZXIpOyB9IH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFBob25lSWNvbiwgbnVsbCkpIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoTGlzdEl0ZW1UZXh0LCB7IHByaW1hcnlUeXBvZ3JhcGh5UHJvcHM6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogaXNEYXJrTW9kZSA/ICcjZmZmJyA6ICcjMDAwJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb250V2VpZ2h0OiAnYm9sZCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBwcmltYXJ5OiBwbGF5ZXIubmFtZSwgc2Vjb25kYXJ5OiBwbGF5ZXIucGhvbmVOdW1iZXIgfSkpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSkpKSk7IH0pLFxyXG4gICAgICAgICFwb2xpY2VPbmxpbmUgJiYgUmVhY3QuY3JlYXRlRWxlbWVudChMaXN0LCB7IHN1YmhlYWRlcjogUmVhY3QuY3JlYXRlRWxlbWVudChMaXN0U3ViaGVhZGVyLCB7IHN4OiB7IGN1cnNvcjogJ3BvaW50ZXInIH0gfSwgXCJQT0xJQ0UgLSBVTkFWQUlMQUJMRVwiKSB9KSxcclxuICAgICAgICAhYW1idWxhbmNlT25saW5lICYmIFJlYWN0LmNyZWF0ZUVsZW1lbnQoTGlzdCwgeyBzdWJoZWFkZXI6IFJlYWN0LmNyZWF0ZUVsZW1lbnQoTGlzdFN1YmhlYWRlciwgeyBzeDogeyBjdXJzb3I6ICdwb2ludGVyJyB9IH0sIFwiQU1CVUxBTkNFIC0gVU5BVkFJTEFCTEVcIikgfSksXHJcbiAgICAgICAgIXRvd09ubGluZSAmJiBSZWFjdC5jcmVhdGVFbGVtZW50KExpc3QsIHsgc3ViaGVhZGVyOiBSZWFjdC5jcmVhdGVFbGVtZW50KExpc3RTdWJoZWFkZXIsIHsgc3g6IHsgY3Vyc29yOiAncG9pbnRlcicgfSB9LCBcIlRPVyAtIFVOQVZBSUxBQkxFXCIpIH0pKSk7XHJcbn07XHJcbiIsImltcG9ydCBzdHlsZWQgZnJvbSBcInN0eWxlZC1jb21wb25lbnRzXCI7XHJcbmV4cG9ydCB2YXIgSGVhZGVyID0gc3R5bGVkKCdkaXYnKSh7XHJcbiAgICB3aWR0aDogJzEwMCUnLFxyXG4gICAganVzdGlmeUNvbnRlbnQ6ICdmbGV4LXN0YXJ0JyxcclxuICAgIGRpc3BsYXk6ICdmbGV4JyxcclxuICAgIGFsaWduSXRlbXM6ICdjZW50ZXInLFxyXG4gICAgZ2FwOiAyMCxcclxuICAgIG1hcmdpbkJvdHRvbTogMjAsXHJcbn0pO1xyXG4iLCJ2YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcclxuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxyXG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XHJcbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xyXG4gICAgfSk7XHJcbn07XHJcbnZhciBfX2dlbmVyYXRvciA9ICh0aGlzICYmIHRoaXMuX19nZW5lcmF0b3IpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBib2R5KSB7XHJcbiAgICB2YXIgXyA9IHsgbGFiZWw6IDAsIHNlbnQ6IGZ1bmN0aW9uKCkgeyBpZiAodFswXSAmIDEpIHRocm93IHRbMV07IHJldHVybiB0WzFdOyB9LCB0cnlzOiBbXSwgb3BzOiBbXSB9LCBmLCB5LCB0LCBnO1xyXG4gICAgcmV0dXJuIGcgPSB7IG5leHQ6IHZlcmIoMCksIFwidGhyb3dcIjogdmVyYigxKSwgXCJyZXR1cm5cIjogdmVyYigyKSB9LCB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgKGdbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSksIGc7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgcmV0dXJuIGZ1bmN0aW9uICh2KSB7IHJldHVybiBzdGVwKFtuLCB2XSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHN0ZXAob3ApIHtcclxuICAgICAgICBpZiAoZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy5cIik7XHJcbiAgICAgICAgd2hpbGUgKF8pIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChmID0gMSwgeSAmJiAodCA9IG9wWzBdICYgMiA/IHlbXCJyZXR1cm5cIl0gOiBvcFswXSA/IHlbXCJ0aHJvd1wiXSB8fCAoKHQgPSB5W1wicmV0dXJuXCJdKSAmJiB0LmNhbGwoeSksIDApIDogeS5uZXh0KSAmJiAhKHQgPSB0LmNhbGwoeSwgb3BbMV0pKS5kb25lKSByZXR1cm4gdDtcclxuICAgICAgICAgICAgaWYgKHkgPSAwLCB0KSBvcCA9IFtvcFswXSAmIDIsIHQudmFsdWVdO1xyXG4gICAgICAgICAgICBzd2l0Y2ggKG9wWzBdKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6IGNhc2UgMTogdCA9IG9wOyBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgNDogXy5sYWJlbCsrOyByZXR1cm4geyB2YWx1ZTogb3BbMV0sIGRvbmU6IGZhbHNlIH07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDU6IF8ubGFiZWwrKzsgeSA9IG9wWzFdOyBvcCA9IFswXTsgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDc6IG9wID0gXy5vcHMucG9wKCk7IF8udHJ5cy5wb3AoKTsgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghKHQgPSBfLnRyeXMsIHQgPSB0Lmxlbmd0aCA+IDAgJiYgdFt0Lmxlbmd0aCAtIDFdKSAmJiAob3BbMF0gPT09IDYgfHwgb3BbMF0gPT09IDIpKSB7IF8gPSAwOyBjb250aW51ZTsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gMyAmJiAoIXQgfHwgKG9wWzFdID4gdFswXSAmJiBvcFsxXSA8IHRbM10pKSkgeyBfLmxhYmVsID0gb3BbMV07IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSA2ICYmIF8ubGFiZWwgPCB0WzFdKSB7IF8ubGFiZWwgPSB0WzFdOyB0ID0gb3A7IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHQgJiYgXy5sYWJlbCA8IHRbMl0pIHsgXy5sYWJlbCA9IHRbMl07IF8ub3BzLnB1c2gob3ApOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0WzJdKSBfLm9wcy5wb3AoKTtcclxuICAgICAgICAgICAgICAgICAgICBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG9wID0gYm9keS5jYWxsKHRoaXNBcmcsIF8pO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHsgb3AgPSBbNiwgZV07IHkgPSAwOyB9IGZpbmFsbHkgeyBmID0gdCA9IDA7IH1cclxuICAgICAgICBpZiAob3BbMF0gJiA1KSB0aHJvdyBvcFsxXTsgcmV0dXJuIHsgdmFsdWU6IG9wWzBdID8gb3BbMV0gOiB2b2lkIDAsIGRvbmU6IHRydWUgfTtcclxuICAgIH1cclxufTtcclxuLyoqXHJcbiAqIFNpbXBsZSB3cmFwcGVyIGFyb3VuZCBmZXRjaCBBUEkgdGFpbG9yZWQgZm9yIENFRi9OVUkgdXNlLlxyXG4gKiBAcGFyYW0gZXZlbnROYW1lIC0gVGhlIGVuZHBvaW50IGV2ZW50bmFtZSB0byB0YXJnZXRcclxuICogQHBhcmFtIGRhdGEgLSBEYXRhIHlvdSB3aXNoIHRvIHNlbmQgaW4gdGhlIE5VSSBDYWxsYmFja1xyXG4gKlxyXG4gKiBAcmV0dXJuIHJldHVybkRhdGEgLSBBIHByb21pc2UgZm9yIHRoZSBkYXRhIHNlbnQgYmFjayBieSB0aGUgTnVpQ2FsbGJhY2tzIENCIGFyZ3VtZW50XHJcbiAqL1xyXG5pbXBvcnQgeyBpc0VudkJyb3dzZXIgfSBmcm9tICcuL21pc2MnO1xyXG5mdW5jdGlvbiBmZXRjaE51aShldmVudE5hbWUsIGRhdGEsIG1vY2tSZXNwKSB7XHJcbiAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIG9wdGlvbnMsIHJlc291cmNlTmFtZSwgcmVzcCwgcmVzcG9uc2VPYmo7XHJcbiAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAncG9zdCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD1VVEYtOCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGEpLFxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzRW52QnJvd3NlcigpICYmIG1vY2tSZXNwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBtb2NrUmVzcF07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJlc291cmNlTmFtZSA9IFwibnB3ZF9xYl9zZXJ2aWNlc1wiO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGZldGNoKFwiaHR0cHM6Ly9cIi5jb25jYXQocmVzb3VyY2VOYW1lLCBcIi9cIikuY29uY2F0KGV2ZW50TmFtZSksIG9wdGlvbnMpXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICByZXNwID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHJlc3AuanNvbigpXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICByZXNwb25zZU9iaiA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgcmVzcG9uc2VPYmpdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxyXG5leHBvcnQgZGVmYXVsdCBmZXRjaE51aTtcclxuIiwiZXhwb3J0IHZhciBpc0VudkJyb3dzZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICByZXR1cm4gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcgJiYgIXdpbmRvdy5pbnZva2VOYXRpdmU7XHJcbn07XHJcbmV4cG9ydCB2YXIgZ2V0UmVzb3VyY2VOYW1lID0gZnVuY3Rpb24gKCkge1xyXG4gICAgcmV0dXJuIHdpbmRvdy5HZXRQYXJlbnRSZXNvdXJjZU5hbWUgPyB3aW5kb3cgPT09IG51bGwgfHwgd2luZG93ID09PSB2b2lkIDAgPyB2b2lkIDAgOiB3aW5kb3cuR2V0UGFyZW50UmVzb3VyY2VOYW1lKCkgOiAnbnB3ZCc7XHJcbn07XHJcbmV4cG9ydCB2YXIgYnVpbGRSZXNwT2JqID0gZnVuY3Rpb24gKGRhdGEsIHN0YXR1cywgZXJyb3JNc2cpIHsgcmV0dXJuICh7XHJcbiAgICBkYXRhOiBkYXRhLFxyXG4gICAgc3RhdHVzOiBzdGF0dXMsXHJcbiAgICBlcnJvck1zZzogZXJyb3JNc2csXHJcbn0pOyB9O1xyXG4iXSwibmFtZXMiOlsiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsImV4cG9ydHMiLCJfY3JlYXRlU3ZnSWNvbiIsIl9qc3hSdW50aW1lIiwiX2RlZmF1bHQiLCJkZWZhdWx0IiwianN4IiwiZCIsIlNlcnZpY2VzSWNvbiIsImZvbnRTaXplIiwiZXh0ZXJuYWxBcHBDb25maWciLCJpZCIsIm5hbWVMb2NhbGUiLCJjb2xvciIsImJhY2tncm91bmRDb2xvciIsInBhdGgiLCJpY29uIiwiYXBwIiwidGhlbWUiLCJjb29rZWQiLCJyYXciLCJfX2Fzc2lnbiIsIk9iamVjdCIsImFzc2lnbiIsInQiLCJzIiwiaSIsIm4iLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJwIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiYXBwbHkiLCJ0aGlzIiwiQ29udGFpbmVyIiwidGVtcGxhdGVPYmplY3RfMSIsImRlZmluZVByb3BlcnR5IiwidmFsdWUiLCJfYSIsImlzRGFya01vZGUiLCJBcHAiLCJwcm9wcyIsImhpc3RvcnkiLCJ1c2VIaXN0b3J5IiwidXNlU3RhdGUiLCJwbGF5ZXJzIiwic2V0UGxheWVycyIsIl9iIiwibWFwcGVkUGxheWVycyIsInNldE1hcHBlZFBsYXllcnMiLCJwYWxldHRlIiwibW9kZSIsInVzZUVmZmVjdCIsInRoZW4iLCJyZXNwIiwiZGF0YSIsIm1hcHBlZFBsYXllciIsInJlZHVjZSIsInBsYXllcnNHcm91cCIsInBsYXllciIsImpvYiIsInB1c2giLCJpbmplY3RGaXJzdCIsIm9uQ2xpY2siLCJnb0JhY2siLCJmb250V2VpZ2h0IiwiTnVpUHJvdmlkZXIiLCJBUFBfUFJJTUFSWV9DT0xPUiIsIkFQUF9URVhUX0NPTE9SIiwicHJpbWFyeSIsIm1haW4iLCJkYXJrIiwibGlnaHQiLCJjb250cmFzdFRleHQiLCJzZWNvbmRhcnkiLCJzdWNjZXNzIiwiUGxheWVyc0xpc3QiLCJjb2xsYXBzZUlkIiwic2V0Q29sbGFwc2VJZCIsInBvbGljZU9ubGluZSIsImFtYnVsYW5jZU9ubGluZSIsInRvd09ubGluZSIsImtleXMiLCJtYXAiLCJrZXkiLCJzdWJoZWFkZXIiLCJzeCIsImN1cnNvciIsInRvVXBwZXJDYXNlIiwiaW4iLCJzZWNvbmRhcnlBY3Rpb24iLCJudW1iZXIiLCJwaG9uZU51bWJlciIsInJlcyIsImNvbnNvbGUiLCJsb2ciLCJwcmltYXJ5VHlwb2dyYXBoeVByb3BzIiwibmFtZSIsIkhlYWRlciIsIndpZHRoIiwianVzdGlmeUNvbnRlbnQiLCJkaXNwbGF5IiwiYWxpZ25JdGVtcyIsImdhcCIsIm1hcmdpbkJvdHRvbSIsImV2ZW50TmFtZSIsIm1vY2tSZXNwIiwidGhpc0FyZyIsIl9hcmd1bWVudHMiLCJnZW5lcmF0b3IiLCJvcHRpb25zIiwiYm9keSIsImYiLCJ5IiwiZyIsIl8iLCJsYWJlbCIsInNlbnQiLCJ0cnlzIiwib3BzIiwibmV4dCIsInZlcmIiLCJTeW1ib2wiLCJpdGVyYXRvciIsInYiLCJvcCIsIlR5cGVFcnJvciIsImRvbmUiLCJwb3AiLCJlIiwic3RlcCIsIl9fZ2VuZXJhdG9yIiwibWV0aG9kIiwiaGVhZGVycyIsIkpTT04iLCJzdHJpbmdpZnkiLCJmZXRjaCIsImNvbmNhdCIsImpzb24iLCJQIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJmdWxmaWxsZWQiLCJyZWplY3RlZCIsInJlc3VsdCIsImlzRW52QnJvd3NlciJdLCJzb3VyY2VSb290IjoiIn0=